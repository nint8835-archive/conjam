var S=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var A=(t,e,r)=>(S(t,e,"read from private field"),r?r.call(t):e.get(t)),j=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},q=(t,e,r,n)=>(S(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(i){if(i.ep)return;i.ep=!0;const u=r(i);fetch(i.href,u)}})();class E{withFields(e){let r=Object.keys(this).map(n=>n in e?e[n]:this[n]);return new this.constructor(...r)}}class k{static fromArray(e,r){let n=r||new K;for(let i=e.length-1;i>=0;--i)n=new R(e[i],n);return n}[Symbol.iterator](){return new ce(this)}toArray(){return[...this]}atLeastLength(e){for(let r of this){if(e<=0)return!0;e--}return e<=0}hasLength(e){for(let r of this){if(e<=0)return!1;e--}return e===0}countLength(){let e=0;for(let r of this)e++;return e}}function o(t,e){return new R(t,e)}function _(t,e){return k.fromArray(t,e)}var L;class ce{constructor(e){j(this,L,void 0);q(this,L,e)}next(){if(A(this,L)instanceof K)return{done:!0};{let{head:e,tail:r}=A(this,L);return q(this,L,r),{value:e,done:!1}}}}L=new WeakMap;class K extends k{}class R extends k{constructor(e,r){super(),this.head=e,this.tail=r}}class M extends E{static isResult(e){return e instanceof M}}class z extends M{constructor(e){super(),this[0]=e}isOk(){return!0}}class H extends M{constructor(e){super(),this[0]=e}isOk(){return!1}}function he(t,e){return e===0?0:t%e}function B(t,e){return Math.trunc(J(t,e))}function J(t,e){return e===0?0:t/e}class Q extends E{}class _e extends E{}class U extends E{}function V(t){return t}function de(t,e){let n=V(t);return ee(n,e)}function pe(t,e){for(;;){let r=t,n=e;if(r.atLeastLength(1))t=r.tail,e=n+1;else return n}}function W(t){return pe(t,0)}function oe(t,e){for(;;){let r=t,n=e;if(r.hasLength(0))return n;{let i=r.head;t=r.tail,e=o(i,n)}}}function ge(t){return oe(t,_([]))}function me(t){if(t.hasLength(0))return new H(void 0);{let e=t.head;return new z(e)}}function we(t,e,r){for(;;){let n=t,i=e,u=r;if(n.hasLength(0))return ge(u);{let s=n.head;t=n.tail,e=i,r=o(i(s),u)}}}function Le(t,e){return we(t,e,_([]))}function ye(t,e){for(;;){let r=t,n=e;if(n<=0)return r;if(r.hasLength(0))return _([]);t=r.tail,e=n-1}}function Z(t,e,r){for(;;){let n=t,i=e,u=r;if(n.hasLength(0))return i;{let s=n.head;t=n.tail,e=u(i,s),r=u}}}function D(t,e,r,n,i,u){for(;;){let s=t,l=e,f=r,a=n,c=i,d=u;if(s===0&&l===0)return c;if(l===0&&f.atLeastLength(1)){let h=f.head,p=f.tail;t=s-1,e=l,r=p,n=a,i=o(h,c),u=d}else if(s===0&&a.atLeastLength(1)){let h=a.head,p=a.tail;t=s,e=l-1,r=f,n=p,i=o(h,c),u=d}else if(f.atLeastLength(1)&&a.atLeastLength(1)){let h=f.head,p=f.tail,w=a.head,y=a.tail;d(h,w)instanceof U?(t=s,e=l-1,r=f,n=y,i=o(w,c),u=d):(t=s-1,e=l,r=p,n=a,i=o(h,c),u=d)}else return c}}function G(t,e,r,n,i,u){for(;;){let s=t,l=e,f=r,a=n,c=i,d=u;if(s===0&&l===0)return c;if(l===0&&f.atLeastLength(1)){let h=f.head,p=f.tail;t=s-1,e=l,r=p,n=a,i=o(h,c),u=d}else if(s===0&&a.atLeastLength(1)){let h=a.head,p=a.tail;t=s,e=l-1,r=f,n=p,i=o(h,c),u=d}else if(f.atLeastLength(1)&&a.atLeastLength(1)){let h=f.head,p=f.tail,w=a.head,y=a.tail;d(w,h)instanceof Q?(t=s-1,e=l,r=p,n=a,i=o(h,c),u=d):(t=s,e=l-1,r=f,n=y,i=o(w,c),u=d)}else return c}}function v(t,e,r,n){let i=B(e,2),u=t,s=ye(t,i);return e<3?n?G(i,e-i,u,s,_([]),r):D(i,e-i,u,s,_([]),r):n?G(i,e-i,v(u,i,r,!1),v(s,e-i,r,!1),_([]),r):D(i,e-i,v(u,i,r,!0),v(s,e-i,r,!0),_([]),r)}function ve(t,e){return v(t,W(t),e,!0)}function xe(t,e){for(;;){let r=t,n=e;if(r.hasLength(0))return n;{let i=r.head;t=r.tail,e=o(i[1],n)}}}function Ie(t){return ve(t,(e,r)=>be(e[0],r[0]))}function Fe(t){let r=Z(t,_([]),(i,u)=>o([$(),u],i)),n=Ie(r);return xe(n,_([]))}function P(t,e){return t.isOk()?t[0]:e}function Oe(t){return Math.ceil(t)}function Ee(t){return Math.trunc(t)}function Me(t,e){return Math.pow(t,e)}function $(){const t=Math.random();return t===1?$():t}function be(t,e){return t===e?new _e:t<e?new Q:new U}function Ae(t){return Oe(t)}function qe(t){return Ee(t)}function ee(t,e){let r=Ae(e)-e>0;return t<0&&r||t===0&&e<0?new H(void 0):new z(Me(t,e))}function Ne(t){return ee(t,.5)}function x(t,e){const r=t.data,n=e*4;return[r[n],r[n+1],r[n+2],r[n+3]]}function m(t,e,r){return t.data[e*4]=r[0],t.data[e*4+1]=r[1],t.data[e*4+2]=r[2],t.data[e*4+3]=r[3],t}function Pe(t){const e=document.getElementById("canvas"),r=e.getContext("2d"),n=r.getImageData(0,0,e.width,e.height),i=t(n);r.putImageData(i,0,0)}const g=160,C=120;function I(t){let r=Le(t,l=>{let a=de(l,2);return P(a,0)}),n=Z(r,0,(l,f)=>l+f),i=(l=>J(l,V(W(t))))(n),u=Ne(i),s=P(u,0);return qe(s)}function Te(){let e=_([[255,0,0,255],[0,255,0,255],[0,0,255,255]]),r=Fe(e),n=me(r);return P(n,[0,0,0,0])}function Xe(t,e){let r=he(e,g);if(B(e,g)===C-1)return t;{let u=x(t,e),s=x(t,e+g),l=x(t,e+g-1),f=x(t,e+g+1);if(u[0]===0&&u[1]===0&&u[2]===0&&u[3]===0)return t;if(s[0]===0&&s[1]===0&&s[2]===0&&s[3]===0){let c=m(t,e+g,u);return m(c,e,[0,0,0,0])}else if(l[0]===0&&l[1]===0&&l[2]===0&&l[3]===0&&r>0){let c=m(t,e+g-1,u);return m(c,e,[0,0,0,0])}else if(f[0]===0&&f[1]===0&&f[2]===0&&f[3]===0&&r<159){let c=m(t,e+g+1,u);return m(c,e,[0,0,0,0])}else if(r<159&&r>0){let a=u[0],c=u[1],d=u[2],h=u[3],p=s[0],w=s[1],y=s[2],b=s[3],re=l[0],ne=l[1],ie=l[2],ue=l[3],se=f[0],le=f[1],fe=f[2],ae=f[3];return m(t,e,[I(_([a,p,re,se])),I(_([c,w,ne,le])),I(_([d,y,ie,fe])),I(_([h,b,ue,ae]))])}else return t}}function Ye(t,e,r){for(;;){let n=t,i=r;if(i===-1)return n;t=B(i,g)===C-1?n:Xe(n,i),r=i-1}}function ke(t,e,r,n){return Pe(i=>{let s=e?m(i,n*g+r,Te()):i;return Ye(s,t,C*g)})}const F=4;let O=0,N=performance.now(),T=!1,X=0,Y=0;function te(){ke(O,T,X,Y);const t=performance.now(),e=1e3/(t-N);O%600===0&&console.log(`Frame ${O} took ${t-N}ms (${e}fps)`),N=t,O++,requestAnimationFrame(te)}function Be(){const t=document.getElementById("canvas");t.addEventListener("mousedown",e=>{T=!0,X=Math.trunc(e.offsetX/F),Y=Math.trunc(e.offsetY/F)}),t.addEventListener("mouseup",()=>{T=!1}),t.addEventListener("mousemove",e=>{X=Math.trunc(e.offsetX/F),Y=Math.trunc(e.offsetY/F)}),requestAnimationFrame(te)}Be();
