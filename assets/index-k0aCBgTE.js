var Mt=Object.defineProperty;var At=(t,e,n)=>e in t?Mt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>(At(t,typeof e!="symbol"?e+"":e,n),n),ut=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var V=(t,e,n)=>(ut(t,e,"read from private field"),n?n.call(t):e.get(t)),ot=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},G=(t,e,n,r)=>(ut(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function m(){}function gt(t){return t()}function ct(){return Object.create(null)}function T(t){t.forEach(gt)}function $t(t){return typeof t=="function"}function R(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Tt(t){return Object.keys(t).length===0}function kt(t,...e){if(t==null){for(const r of e)r(void 0);return m}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function bt(t,e,n){t.$$.on_destroy.push(kt(e,n))}function d(t,e){t.appendChild(e)}function q(t,e,n){t.insertBefore(e,n||null)}function O(t){t.parentNode&&t.parentNode.removeChild(t)}function g(t){return document.createElement(t)}function M(t){return document.createTextNode(t)}function C(){return M(" ")}function D(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function a(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function wt(t){return t===""?null:+t}function Dt(t){return Array.from(t.childNodes)}function Nt(t,e){e=""+e,t.data!==e&&(t.data=e)}function N(t,e){t.value=e??""}function Bt(t,e,n,r){t.style.setProperty(e,n,"")}let A;function S(t){A=t}function Pt(){if(!A)throw new Error("Function called outside component initialization");return A}function jt(t){Pt().$$.on_mount.push(t)}const I=[],lt=[];let F=[];const at=[],qt=Promise.resolve();let J=!1;function Rt(){J||(J=!0,qt.then(yt))}function Q(t){F.push(t)}const H=new Set;let v=0;function yt(){if(v!==0)return;const t=A;do{try{for(;v<I.length;){const e=I[v];v++,S(e),zt(e.$$)}}catch(e){throw I.length=0,v=0,e}for(S(null),I.length=0,v=0;lt.length;)lt.pop()();for(let e=0;e<F.length;e+=1){const n=F[e];H.has(n)||(H.add(n),n())}F.length=0}while(I.length);for(;at.length;)at.pop()();J=!1,H.clear(),S(t)}function zt(t){if(t.fragment!==null){t.update(),T(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Q)}}function Xt(t){const e=[],n=[];F.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),F=e}const j=new Set;let Yt;function Z(t,e){t&&t.i&&(j.delete(t),t.i(e))}function ft(t,e,n,r){if(t&&t.o){if(j.has(t))return;j.add(t),Yt.c.push(()=>{j.delete(t)}),t.o(e)}}function dt(t){t&&t.c()}function tt(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),Q(()=>{const s=t.$$.on_mount.map(gt).filter($t);t.$$.on_destroy?t.$$.on_destroy.push(...s):T(s),t.$$.on_mount=[]}),i.forEach(Q)}function et(t,e){const n=t.$$;n.fragment!==null&&(Xt(n.after_update),T(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Vt(t,e){t.$$.dirty[0]===-1&&(I.push(t),Rt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function rt(t,e,n,r,i,s,o=null,l=[-1]){const c=A;S(t);const u=t.$$={fragment:null,ctx:[],props:s,update:m,not_equal:i,bound:ct(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:ct(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(h,$,...b)=>{const y=b.length?b[0]:$;return u.ctx&&i(u.ctx[h],u.ctx[h]=y)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](y),f&&Vt(t,h)),$}):[],u.update(),f=!0,T(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const h=Dt(e.target);u.fragment&&u.fragment.l(h),h.forEach(O)}else u.fragment&&u.fragment.c();e.intro&&Z(t.$$.fragment),tt(t,e.target,e.anchor),yt()}S(c)}class it{constructor(){Y(this,"$$");Y(this,"$$set")}$destroy(){et(this,1),this.$destroy=m}$on(e,n){if(!$t(n))return m;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Tt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Gt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Gt);class z{withFields(e){let n=Object.keys(this).map(r=>r in e?e[r]:this[r]);return new this.constructor(...n)}}class st{static fromArray(e,n){let r=n||new xt;for(let i=e.length-1;i>=0;--i)r=new vt(e[i],r);return r}[Symbol.iterator](){return new Kt(this)}toArray(){return[...this]}atLeastLength(e){for(let n of this){if(e<=0)return!0;e--}return e<=0}hasLength(e){for(let n of this){if(e<=0)return!1;e--}return e===0}countLength(){let e=0;for(let n of this)e++;return e}}function K(t,e){return new vt(t,e)}function Ht(t,e){return st.fromArray(t,e)}var x;class Kt{constructor(e){ot(this,x,void 0);G(this,x,e)}next(){if(V(this,x)instanceof xt)return{done:!0};{let{head:e,tail:n}=V(this,x);return G(this,x,n),{value:e,done:!1}}}}x=new WeakMap;class xt extends st{}class vt extends st{constructor(e,n){super(),this.head=e,this.tail=n}}class X extends z{static isResult(e){return e instanceof X}}class Ut extends X{constructor(e){super(),this[0]=e}isOk(){return!0}}let Wt=class extends X{constructor(e){super(),this[0]=e}isOk(){return!1}};function Jt(t,e){return t%e}function Qt(t,e){return Math.trunc(Zt(t,e))}function Zt(t,e){return t/e}class te extends z{}class Et extends z{}class It extends z{}function ee(t){return t}function pt(t,e){let r=ee(t);return Lt(r,e)}function ne(t,e){return t===e?new Et:t<e?new te:new It}function ht(t,e,n){for(;;){let r=t,i=e,s=n;if(r.hasLength(0))return i;{let o=r.head;t=r.tail,e=s(i,o),n=s}}}function re(t,e,n){for(;;){let r=t,i=e,s=n,o=ne(r,i);if(o instanceof Et)return K(i,s);o instanceof It?(t=r,e=i+1,n=K(i,s)):(t=r,e=i-1,n=K(i,s))}}function mt(t,e){return re(t,e,Ht([]))}function U(t,e){return t.isOk()?t[0]:e}function ie(t){return Math.ceil(t)}function _t(t){return Math.round(t)}function se(t,e){return Math.pow(t,e)}function ue(t){return ie(t)}function Lt(t,e){let n=ue(e)-e>0;return t<0&&n||t===0&&e<0?new Wt(void 0):new Ut(se(t,e))}function oe(t){return Lt(t,.5)}function ce(t){return-1*t}function le(t){return t>=0?_t(t):0-_t(ce(t))}function ae(t){return le(t)}const fe=640,de=480;function B(t,e){const n=t.data,r=e*4;return n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]}function L(t,e,n){const r=e*4,i=t.data;return i[r]=n>>24&255,i[r+1]=n>>16&255,i[r+2]=n>>8&255,i[r+3]=n&255,t}function pe(t){const n=document.getElementById("canvas").getContext("2d"),r=n.getImageData(0,0,fe,de),i=t(r);n.putImageData(i,0,0)}const w=640;function Ft(t,e,n,r){return L(t,n*w+e,r)}const he=480;function me(t,e,n,r,i){let s=mt(-1*r,r);return ht(s,t,(o,l)=>{let c=mt(-1*r,r);return ht(c,o,(u,f)=>(()=>{let b=oe((()=>{let _=pt(f,2);return U(_,0)})()+(()=>{let _=pt(l,2);return U(_,0)})()),y=U(b,0);return ae(y)})()>r?u:Ft(u,e+f,n+l,i))})}const _e=479;function ge(t,e){let n=Jt(e,w),r=Qt(e,w);if(r===_e)return t;{let s=B(t,e),o=B(t,e+w),l=B(t,e+w-1),c=B(t,e+w+1);if(s===0)return t;if(o===0){let f=Ft(t,n,r+1,s);return L(f,e,0)}else if(l===0&&n>0){let f=L(t,e+w-1,s);return L(f,e,0)}else if(c===0&&n<639){let f=L(t,e+w+1,s);return L(f,e,0)}else return t}}function $e(t,e){for(;;){let n=t,r=e;if(r===-1)return n;t=ge(n,r),e=r-1}}function be(t,e,n,r,i){return pe(s=>{let l=t?me(s,e,n,r,i):s;return $e(l,he*w)})}const E=[];function Ct(t,e=m){let n;const r=new Set;function i(l){if(R(t,l)&&(t=l,n)){const c=!E.length;for(const u of r)u[1](),E.push(u,t);if(c){for(let u=0;u<E.length;u+=2)E[u][0](E[u+1]);E.length=0}}}function s(l){i(l(t))}function o(l,c=m){const u=[l,c];return r.add(u),r.size===1&&(n=e(i,s)||m),l(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}const P=1,p={lastFrameTime:performance.now(),currentFrameTime:performance.now(),mouseDown:!1,mouseX:0,mouseY:0},St=Ct(p),nt={brushSize:10,brushColour:"#ff0000"},W=Ct(nt);function Ot(){be(p.mouseDown,p.mouseX,p.mouseY,nt.brushSize,parseInt(nt.brushColour.substring(1),16)<<8|255),p.currentFrameTime=performance.now(),St.update(()=>({...p})),p.lastFrameTime=p.currentFrameTime,requestAnimationFrame(Ot)}function we(){const t=document.getElementById("canvas");t.addEventListener("mousedown",e=>{p.mouseDown=!0,p.mouseX=Math.trunc(e.offsetX/P),p.mouseY=Math.trunc(e.offsetY/P)}),t.addEventListener("mouseup",()=>{p.mouseDown=!1}),t.addEventListener("mousemove",e=>{p.mouseX=Math.trunc(e.offsetX/P),p.mouseY=Math.trunc(e.offsetY/P)}),requestAnimationFrame(Ot)}function ye(t){let e,n,r,i,s,o,l,c,u,f,h,$,b,y;return{c(){e=g("div"),n=g("label"),r=M(`Brush size:
        `),i=g("input"),s=C(),o=g("label"),l=M(`Brush colour:
        `),c=g("input"),u=C(),f=g("button"),f.textContent="Insert noise",h=C(),$=g("button"),$.textContent="Clear canvas",a(i,"class","rounded-md bg-slate-900 p-2 outline-none ring-teal-600 transition-all focus:ring-2"),a(i,"type","number"),a(i,"min","0"),a(i,"max","50"),a(i,"step","1"),a(n,"class","flex flex-row items-center justify-between"),a(c,"class","rounded-md bg-slate-900 p-2 outline-none ring-teal-600 transition-all focus:ring-2"),a(c,"type","color"),a(o,"class","flex flex-row items-center justify-between"),a(f,"class","rounded-md bg-teal-600 p-2 transition-colors hover:bg-teal-700"),a($,"class","rounded-md bg-teal-600 p-2 transition-colors hover:bg-teal-700"),a(e,"class","grid grid-cols-2 gap-2 rounded-b-lg bg-slate-950 p-4")},m(_,k){q(_,e,k),d(e,n),d(n,r),d(n,i),N(i,t[0].brushSize),d(e,s),d(e,o),d(o,l),d(o,c),N(c,t[0].brushColour),d(e,u),d(e,f),d(e,h),d(e,$),b||(y=[D(i,"input",t[1]),D(c,"input",t[2]),D(f,"click",xe),D($,"click",ve)],b=!0)},p(_,[k]){k&1&&wt(i.value)!==_[0].brushSize&&N(i,_[0].brushSize),k&1&&N(c,_[0].brushColour)},i:m,o:m,d(_){_&&O(e),b=!1,T(y)}}}function xe(){const t=document.getElementById("canvas"),e=t.getContext("2d"),n=e.getImageData(0,0,t.width,t.height),r=[[255,0,0,0],[0,255,0],[0,0,255]];for(let i=0;i<n.data.length;i+=4){if(n.data[i+3])continue;const[s,o,l]=r[Math.floor(Math.random()*r.length)];n.data[i]=s,n.data[i+1]=o,n.data[i+2]=l,n.data[i+3]=255}e.putImageData(n,0,0)}function ve(){const t=document.getElementById("canvas");t.getContext("2d").clearRect(0,0,t.width,t.height)}function Ee(t,e,n){let r;bt(t,W,o=>n(0,r=o));function i(){r.brushSize=wt(this.value),W.set(r)}function s(){r.brushColour=this.value,W.set(r)}return[r,i,s]}class Ie extends it{constructor(e){super(),rt(this,e,Ee,ye,R,{})}}function Le(t){let e,n,r;return{c(){e=g("div"),n=M("FPS: "),r=M(t[0]),a(e,"class","absolute bottom-2 right-2 text-slate-500")},m(i,s){q(i,e,s),d(e,n),d(e,r)},p(i,[s]){s&1&&Nt(r,i[0])},i:m,o:m,d(i){i&&O(e)}}}const Fe=200;function Ce(t,e,n){let r;bt(t,St,o=>n(2,r=o));let i=0,s=performance.now();return t.$$.update=()=>{if(t.$$.dirty&6){const o=performance.now();o-s>Fe&&(n(1,s=o),n(0,i=Math.trunc(1e3/(r.currentFrameTime-r.lastFrameTime))))}},[i,s,r]}class Se extends it{constructor(e){super(),rt(this,e,Ce,Le,R,{})}}function Oe(t){let e,n,r,i,s,o,l;return i=new Ie({}),o=new Se({}),{c(){e=g("div"),n=g("canvas"),r=C(),dt(i.$$.fragment),s=C(),dt(o.$$.fragment),a(n,"class","scale h-[480px] w-full bg-black bg-opacity-25"),Bt(n,"image-rendering","pixelated"),a(n,"id","canvas"),a(n,"width","640"),a(n,"height","480"),a(e,"class","w-[640px]")},m(c,u){q(c,e,u),d(e,n),d(e,r),tt(i,e,null),q(c,s,u),tt(o,c,u),l=!0},p:m,i(c){l||(Z(i.$$.fragment,c),Z(o.$$.fragment,c),l=!0)},o(c){ft(i.$$.fragment,c),ft(o.$$.fragment,c),l=!1},d(c){c&&(O(e),O(s)),et(i),et(o,c)}}}function Me(t){return jt(()=>{we()}),[]}class Ae extends it{constructor(e){super(),rt(this,e,Me,Oe,R,{})}}new Ae({target:document.getElementById("app")});
