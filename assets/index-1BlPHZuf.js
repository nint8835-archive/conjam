var k=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var A=(e,t,r)=>(k(e,t,"read from private field"),r?r.call(e):t.get(e)),j=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},q=(e,t,r,i)=>(k(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerPolicy&&(u.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?u.credentials="include":n.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(n){if(n.ep)return;n.ep=!0;const u=r(n);fetch(n.href,u)}})();class E{withFields(t){let r=Object.keys(this).map(i=>i in t?t[i]:this[i]);return new this.constructor(...r)}}class S{static fromArray(t,r){let i=r||new Q;for(let n=t.length-1;n>=0;--n)i=new U(t[n],i);return i}[Symbol.iterator](){return new re(this)}toArray(){return[...this]}atLeastLength(t){for(let r of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let r of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let r of this)t++;return t}}function o(e,t){return new U(e,t)}function m(e,t){return S.fromArray(e,t)}var L;class re{constructor(t){j(this,L,void 0);q(this,L,t)}next(){if(A(this,L)instanceof Q)return{done:!0};{let{head:t,tail:r}=A(this,L);return q(this,L,r),{value:t,done:!1}}}}L=new WeakMap;class Q extends S{}class U extends S{constructor(t,r){super(),this.head=t,this.tail=r}}class F extends E{static isResult(t){return t instanceof F}}class V extends F{constructor(t){super(),this[0]=t}isOk(){return!0}}class W extends F{constructor(t){super(),this[0]=t}isOk(){return!1}}function ne(e,t){return t===0?0:e%t}function T(e,t){return Math.trunc(ie(e,t))}function ie(e,t){return t===0?0:e/t}class X extends E{}class Y extends E{}class O extends E{}function ue(e){return e}function z(e,t){let i=ue(e);return $(i,t)}function se(e,t){return e===t?new Y:e<t?new X:new O}function le(e,t){for(;;){let r=e,i=t;if(r.atLeastLength(1))e=r.tail,t=i+1;else return i}}function fe(e){return le(e,0)}function ae(e){if(e.hasLength(0))return new W(void 0);{let t=e.head;return new V(t)}}function ce(e,t){for(;;){let r=e,i=t;if(i<=0)return r;if(r.hasLength(0))return m([]);e=r.tail,t=i-1}}function P(e,t,r){for(;;){let i=e,n=t,u=r;if(i.hasLength(0))return n;{let s=i.head;e=i.tail,t=u(n,s),r=u}}}function G(e,t,r,i,n,u){for(;;){let s=e,l=t,a=r,f=i,c=n,p=u;if(s===0&&l===0)return c;if(l===0&&a.atLeastLength(1)){let h=a.head,_=a.tail;e=s-1,t=l,r=_,i=f,n=o(h,c),u=p}else if(s===0&&f.atLeastLength(1)){let h=f.head,_=f.tail;e=s,t=l-1,r=a,i=_,n=o(h,c),u=p}else if(a.atLeastLength(1)&&f.atLeastLength(1)){let h=a.head,_=a.tail,g=f.head,b=f.tail;p(h,g)instanceof O?(e=s,t=l-1,r=a,i=b,n=o(g,c),u=p):(e=s-1,t=l,r=_,i=f,n=o(h,c),u=p)}else return c}}function K(e,t,r,i,n,u){for(;;){let s=e,l=t,a=r,f=i,c=n,p=u;if(s===0&&l===0)return c;if(l===0&&a.atLeastLength(1)){let h=a.head,_=a.tail;e=s-1,t=l,r=_,i=f,n=o(h,c),u=p}else if(s===0&&f.atLeastLength(1)){let h=f.head,_=f.tail;e=s,t=l-1,r=a,i=_,n=o(h,c),u=p}else if(a.atLeastLength(1)&&f.atLeastLength(1)){let h=a.head,_=a.tail,g=f.head,b=f.tail;p(g,h)instanceof X?(e=s-1,t=l,r=_,i=f,n=o(h,c),u=p):(e=s,t=l-1,r=a,i=b,n=o(g,c),u=p)}else return c}}function x(e,t,r,i){let n=T(t,2),u=e,s=ce(e,n);return t<3?i?K(n,t-n,u,s,m([]),r):G(n,t-n,u,s,m([]),r):i?K(n,t-n,x(u,n,r,!1),x(s,t-n,r,!1),m([]),r):G(n,t-n,x(u,n,r,!0),x(s,t-n,r,!0),m([]),r)}function he(e,t){return x(e,fe(e),t,!0)}function _e(e,t,r){for(;;){let i=e,n=t,u=r,s=se(i,n);if(s instanceof Y)return o(n,u);s instanceof O?(e=i,t=n+1,r=o(n,u)):(e=i,t=n-1,r=o(n,u))}}function R(e,t){return _e(e,t,m([]))}function oe(e,t){for(;;){let r=e,i=t;if(r.hasLength(0))return i;{let n=r.head;e=r.tail,t=o(n[1],i)}}}function pe(e){return he(e,(t,r)=>we(t[0],r[0]))}function de(e){let r=P(e,m([]),(n,u)=>o([Z(),u],n)),i=pe(r);return oe(i,m([]))}function M(e,t){return e.isOk()?e[0]:t}function ge(e){return Math.ceil(e)}function H(e){return Math.round(e)}function me(e,t){return Math.pow(e,t)}function Z(){const e=Math.random();return e===1?Z():e}function we(e,t){return e===t?new Y:e<t?new X:new O}function Le(e){return ge(e)}function $(e,t){let r=Le(t)-t>0;return e<0&&r||e===0&&t<0?new W(void 0):new V(me(e,t))}function ye(e){return $(e,.5)}function ve(e){return-1*e}function xe(e){return e>=0?H(e):0-H(ve(e))}function Ie(e){return xe(e)}function y(e,t){const r=e.data,i=t*4;return[r[i],r[i+1],r[i+2],r[i+3]]}function w(e,t,r){return e.data[t*4]=r[0],e.data[t*4+1]=r[1],e.data[t*4+2]=r[2],e.data[t*4+3]=r[3],e}function Me(e){const t=document.getElementById("canvas"),r=t.getContext("2d"),i=r.getImageData(0,0,t.width,t.height),n=e(i);r.putImageData(n,0,0)}const d=640;function Ee(e,t,r,i){return w(e,r*d+t,i)}const Fe=480;function Oe(){let t=m([[255,0,0,255],[0,255,0,255],[0,0,255,255]]),r=de(t),i=ae(r);return M(i,[0,0,0,0])}function be(e,t){if(T(t,d)===0)return e;{let n=y(e,t),u=y(e,t-d);return n[3]===255&&u[3]===255&&n[0]===u[0]&&n[1]===u[1]&&n[2]===u[2]?(n[0],n[1],n[2],u[0],u[1],u[2],w(e,t,[0,0,0,0])):e}}const Ae=479;function qe(e,t){let r=ne(t,d);if(T(t,d)===Ae)return e;{let u=y(e,t),s=y(e,t+d),l=y(e,t+d-1),a=y(e,t+d+1);if(u[0]===0&&u[1]===0&&u[2]===0&&u[3]===0)return e;if(s[0]===0&&s[1]===0&&s[2]===0&&s[3]===0){let c=w(e,t+d,u);return w(c,t,[0,0,0,0])}else if(l[0]===0&&l[1]===0&&l[2]===0&&l[3]===0&&r>0){let c=w(e,t+d-1,u);return w(c,t,[0,0,0,0])}else if(a[0]===0&&a[1]===0&&a[2]===0&&a[3]===0&&r<639){let c=w(e,t+d+1,u);return w(c,t,[0,0,0,0])}else return e}}function Ne(e,t,r){for(;;){let i=e,n=r;if(n===-1)return i;e=(()=>{let l=qe(i,n);return be(l,n)})(),r=n-1}}const v=20;function Pe(e,t,r){let i=Oe(),n=R(-1*v,v);return P(n,e,(u,s)=>{let l=R(-1*v,v);return P(l,u,(a,f)=>(()=>{let h=ye((()=>{let g=z(f,2);return M(g,0)})()+(()=>{let g=z(s,2);return M(g,0)})()),_=M(h,0);return Ie(_)})()>v?a:Ee(a,t+f,r+s,i))})}function Ce(e,t,r,i){return Me(n=>{let s=t?Pe(n,r,i):n;return Ne(s,e,Fe*d)})}const I=1;let N=0,J=performance.now(),C=!1,D=0,B=0;const De=document.getElementById("fps");function ee(){Ce(N,C,D,B);const e=performance.now(),t=1e3/(e-J);N%60===0&&(De.textContent=`FPS: ${Math.trunc(t)}`),J=e,N++,requestAnimationFrame(ee)}function Be(){const e=document.getElementById("canvas"),t=e.getContext("2d"),r=t.getImageData(0,0,e.width,e.height),i=[[255,0,0,0],[0,255,0],[0,0,255]];for(let n=0;n<r.data.length;n+=4){const[u,s,l]=i[Math.floor(Math.random()*i.length)];r.data[n]=u,r.data[n+1]=s,r.data[n+2]=l,r.data[n+3]=255}t.putImageData(r,0,0),e.addEventListener("mousedown",n=>{C=!0,D=Math.trunc(n.offsetX/I),B=Math.trunc(n.offsetY/I)}),e.addEventListener("mouseup",()=>{C=!1}),e.addEventListener("mousemove",n=>{D=Math.trunc(n.offsetX/I),B=Math.trunc(n.offsetY/I)}),requestAnimationFrame(ee)}Be();
