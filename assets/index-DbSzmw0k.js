var D=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var j=(e,t,r)=>(D(e,t,"read from private field"),r?r.call(e):t.get(e)),X=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},k=(e,t,r,n)=>(D(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(i){if(i.ep)return;i.ep=!0;const u=r(i);fetch(i.href,u)}})();class F{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}}class C{static fromArray(t,r){let n=r||new Q;for(let i=t.length-1;i>=0;--i)n=new U(t[i],n);return n}[Symbol.iterator](){return new ce(this)}toArray(){return[...this]}atLeastLength(t){for(let r of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let r of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let r of this)t++;return t}}function h(e,t){return new U(e,t)}function g(e,t){return C.fromArray(e,t)}var L;class ce{constructor(t){X(this,L,void 0);k(this,L,t)}next(){if(j(this,L)instanceof Q)return{done:!0};{let{head:t,tail:r}=j(this,L);return k(this,L,r),{value:t,done:!1}}}}L=new WeakMap;class Q extends C{}class U extends C{constructor(t,r){super(),this.head=t,this.tail=r}}class b extends F{static isResult(t){return t instanceof b}}class V extends b{constructor(t){super(),this[0]=t}isOk(){return!0}}class Z extends b{constructor(t){super(),this[0]=t}isOk(){return!1}}function ae(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!W(n)||!W(i)||!me(n,i)||_e(n,i)||he(n,i)||oe(n,i)||ge(n,i)||de(n,i)||we(n,i))return!1;const s=Object.getPrototypeOf(n);if(s!==null&&typeof s.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[f,c]=pe(n);for(let l of f(n))r.push(c(n,l),c(i,l))}return!0}function pe(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function _e(e,t){return e instanceof Date&&(e>t||e<t)}function he(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function oe(e,t){return Array.isArray(e)&&e.length!==t.length}function ge(e,t){return e instanceof Map&&e.size!==t.size}function de(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function we(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function W(e){return typeof e=="object"&&e!==null}function me(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function $(e,t){return t===0?0:e%t}function y(e,t){return Math.trunc(ee(e,t))}function ee(e,t){return t===0?0:e/t}class R extends F{}class Y extends F{}class A extends F{}function te(e){return e}function ye(e,t){let n=te(e);return ue(n,t)}function Le(e,t){return e===t?new Y:e<t?new R:new A}function xe(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1))e=r.tail,t=n+1;else return n}}function re(e){return xe(e,0)}function ve(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=h(i,n)}}}function ne(e){return ve(e,g([]))}function Ee(e){if(e.hasLength(0))return new Z(void 0);{let t=e.head;return new V(t)}}function qe(e,t,r){for(;;){let n=e,i=t,u=r;if(n.hasLength(0))return ne(u);{let s=n.head,f=n.tail,c=i(s)?h(s,u):u;e=f,t=i,r=c}}}function Me(e,t){return qe(e,t,g([]))}function Oe(e,t,r){for(;;){let n=e,i=t,u=r;if(n.hasLength(0))return ne(u);{let s=n.head;e=n.tail,t=i,r=h(i(s),u)}}}function E(e,t){return Oe(e,t,g([]))}function Ie(e,t){for(;;){let r=e,n=t;if(n<=0)return r;if(r.hasLength(0))return g([]);e=r.tail,t=n-1}}function I(e,t,r){for(;;){let n=e,i=t,u=r;if(n.hasLength(0))return i;{let s=n.head;e=n.tail,t=u(i,s),r=u}}}function G(e,t,r,n,i,u){for(;;){let s=e,f=t,c=r,l=n,a=i,_=u;if(s===0&&f===0)return a;if(f===0&&c.atLeastLength(1)){let p=c.head,d=c.tail;e=s-1,t=f,r=d,n=l,i=h(p,a),u=_}else if(s===0&&l.atLeastLength(1)){let p=l.head,d=l.tail;e=s,t=f-1,r=c,n=d,i=h(p,a),u=_}else if(c.atLeastLength(1)&&l.atLeastLength(1)){let p=c.head,d=c.tail,x=l.head,P=l.tail;_(p,x)instanceof A?(e=s,t=f-1,r=c,n=P,i=h(x,a),u=_):(e=s-1,t=f,r=d,n=l,i=h(p,a),u=_)}else return a}}function K(e,t,r,n,i,u){for(;;){let s=e,f=t,c=r,l=n,a=i,_=u;if(s===0&&f===0)return a;if(f===0&&c.atLeastLength(1)){let p=c.head,d=c.tail;e=s-1,t=f,r=d,n=l,i=h(p,a),u=_}else if(s===0&&l.atLeastLength(1)){let p=l.head,d=l.tail;e=s,t=f-1,r=c,n=d,i=h(p,a),u=_}else if(c.atLeastLength(1)&&l.atLeastLength(1)){let p=c.head,d=c.tail,x=l.head,P=l.tail;_(x,p)instanceof R?(e=s-1,t=f,r=d,n=l,i=h(p,a),u=_):(e=s,t=f-1,r=c,n=P,i=h(x,a),u=_)}else return a}}function v(e,t,r,n){let i=y(t,2),u=e,s=Ie(e,i);return t<3?n?K(i,t-i,u,s,g([]),r):G(i,t-i,u,s,g([]),r):n?K(i,t-i,v(u,i,r,!1),v(s,t-i,r,!1),g([]),r):G(i,t-i,v(u,i,r,!0),v(s,t-i,r,!0),g([]),r)}function Fe(e,t){return v(e,re(e),t,!0)}function be(e,t,r){for(;;){let n=e,i=t,u=r,s=Le(n,i);if(s instanceof Y)return h(i,u);s instanceof A?(e=n,t=i+1,r=h(i,u)):(e=n,t=i-1,r=h(i,u))}}function H(e,t){return be(e,t,g([]))}function Ae(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=h(i[1],n)}}}function Pe(e){return Fe(e,(t,r)=>Ne(t[0],r[0]))}function je(e){let r=I(e,g([]),(i,u)=>h([ie(),u],i)),n=Pe(r);return Ae(n,g([]))}function B(e,t){return e.isOk()?e[0]:t}function ke(e){return Math.ceil(e)}function Se(e){return Math.trunc(e)}function Be(e,t){return Math.pow(e,t)}function ie(){const e=Math.random();return e===1?ie():e}function Ne(e,t){return e===t?new Y:e<t?new R:new A}function Te(e){return ke(e)}function ze(e){return Se(e)}function ue(e,t){let r=Te(t)-t>0;return e<0&&r||e===0&&t<0?new Z(void 0):new V(Be(e,t))}function Ce(e){return ue(e,.5)}function m(e,t){const r=e.data,n=t*4;return[r[n],r[n+1],r[n+2],r[n+3]]}function w(e,t,r){return e.data[t*4]=r[0],e.data[t*4+1]=r[1],e.data[t*4+2]=r[2],e.data[t*4+3]=r[3],e}function Re(e){const t=document.getElementById("canvas"),r=t.getContext("2d"),n=r.getImageData(0,0,t.width,t.height),i=e(n);r.putImageData(i,0,0)}const o=160;function Ye(e,t,r,n){return w(e,r*o+t,n)}const De=120;function q(e){let r=I(e,0,(s,f)=>{let l=ye(f,2),a=B(l,0);return(_=>_+s)(a)}),n=(s=>ee(s,te(re(e))))(r),i=Ce(n),u=B(i,0);return ze(u)}function Xe(){let t=g([[255,0,0,255],[0,255,0,255],[0,0,255,255]]),r=je(t),n=Ee(r);return B(n,[0,0,0,0])}const We=159,se=119;function Ge(e,t){let r=$(t,o);if(y(t,o)===se||r===0||r===We)return e;{let u=m(e,t);if(u[0]===0&&u[1]===0&&u[2]===0&&u[3]===0)return e;{let s=m(e,t+o-1),f=m(e,t+o),c=m(e,t+o+1),l=(()=>{let _=g([u,s,f,c]);return Me(_,p=>!ae(p,[0,0,0,0]))})();return w(e,t,[q(E(l,p=>p[0])),q(E(l,p=>p[1])),q(E(l,p=>p[2])),q(E(l,p=>p[3]))])}}}function Ke(e,t){let r=$(t,o);if(y(t,o)===se)return e;{let u=m(e,t),s=m(e,t+o),f=m(e,t+o-1),c=m(e,t+o+1);if(u[0]===0&&u[1]===0&&u[2]===0&&u[3]===0)return e;if(s[0]===0&&s[1]===0&&s[2]===0&&s[3]===0){let a=w(e,t+o,u);return w(a,t,[0,0,0,0])}else if(f[0]===0&&f[1]===0&&f[2]===0&&f[3]===0&&r>0){let a=w(e,t+o-1,u);return w(a,t,[0,0,0,0])}else if(c[0]===0&&c[1]===0&&c[2]===0&&c[3]===0&&r<159){let a=w(e,t+o+1,u);return w(a,t,[0,0,0,0])}else return e}}function He(e,t,r){for(;;){let n=e,i=r;if(i===-1)return n;e=(()=>{let f=Ke(n,i);return Ge(f,i)})(),r=i-1}}const M=5;function Je(e,t,r){let n=Xe(),i=H(y(M,-2),y(M,2)+1);return I(i,e,(u,s)=>{let f=H(y(M,-2),y(M,2)+1);return I(f,u,(c,l)=>Ye(c,t+l,r+s,n))})}function Qe(e,t,r,n){return Re(i=>{let s=t?Je(i,r,n):i;return He(s,e,De*o)})}const O=4;let S=0,J=performance.now(),N=!1,T=0,z=0;const Ue=document.getElementById("fps");function le(){Qe(S,N,T,z);const e=performance.now(),t=1e3/(e-J);S%60===0&&(Ue.textContent=`FPS: ${Math.trunc(t)}`),J=e,S++,requestAnimationFrame(le)}function Ve(){const e=document.getElementById("canvas");e.addEventListener("mousedown",t=>{N=!0,T=Math.trunc(t.offsetX/O),z=Math.trunc(t.offsetY/O)}),e.addEventListener("mouseup",()=>{N=!1}),e.addEventListener("mousemove",t=>{T=Math.trunc(t.offsetX/O),z=Math.trunc(t.offsetY/O)}),requestAnimationFrame(le)}Ve();
