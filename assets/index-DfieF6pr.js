var z=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var D=(e,t,n)=>(z(e,t,"read from private field"),n?n.call(e):t.get(e)),G=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},A=(e,t,n,i)=>(z(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(r){if(r.ep)return;r.ep=!0;const u=n(r);fetch(r.href,u)}})();class E{withFields(t){let n=Object.keys(this).map(i=>i in t?t[i]:this[i]);return new this.constructor(...n)}}class B{static fromArray(t,n){let i=n||new U;for(let r=t.length-1;r>=0;--r)i=new V(t[r],i);return i}[Symbol.iterator](){return new se(this)}toArray(){return[...this]}atLeastLength(t){for(let n of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let n of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let n of this)t++;return t}}function _(e,t){return new V(e,t)}function m(e,t){return B.fromArray(e,t)}var w;class se{constructor(t){G(this,w,void 0);A(this,w,t)}next(){if(D(this,w)instanceof U)return{done:!0};{let{head:t,tail:n}=D(this,w);return A(this,w,n),{value:t,done:!1}}}}w=new WeakMap;class U extends B{}class V extends B{constructor(t,n){super(),this.head=t,this.tail=n}}class F extends E{static isResult(t){return t instanceof F}}class Z extends F{constructor(t){super(),this[0]=t}isOk(){return!0}}class $ extends F{constructor(t){super(),this[0]=t}isOk(){return!1}}function ee(e,t){return t===0?0:e%t}function S(e,t){return Math.trunc(le(e,t))}function le(e,t){return t===0?0:e/t}class T extends E{}class k extends E{}class O extends E{}function fe(e){return e}function H(e,t){let i=fe(e);return ne(i,t)}function ae(e,t){return e===t?new k:e<t?new T:new O}function ce(e,t){for(;;){let n=e,i=t;if(n.atLeastLength(1))e=n.tail,t=i+1;else return i}}function he(e){return ce(e,0)}function oe(e){if(e.hasLength(0))return new $(void 0);{let t=e.head;return new Z(t)}}function _e(e,t){for(;;){let n=e,i=t;if(i<=0)return n;if(n.hasLength(0))return m([]);e=n.tail,t=i-1}}function q(e,t,n){for(;;){let i=e,r=t,u=n;if(i.hasLength(0))return r;{let s=i.head;e=i.tail,t=u(r,s),n=u}}}function K(e,t,n,i,r,u){for(;;){let s=e,l=t,a=n,f=i,c=r,d=u;if(s===0&&l===0)return c;if(l===0&&a.atLeastLength(1)){let h=a.head,o=a.tail;e=s-1,t=l,n=o,i=f,r=_(h,c),u=d}else if(s===0&&f.atLeastLength(1)){let h=f.head,o=f.tail;e=s,t=l-1,n=a,i=o,r=_(h,c),u=d}else if(a.atLeastLength(1)&&f.atLeastLength(1)){let h=a.head,o=a.tail,g=f.head,b=f.tail;d(h,g)instanceof O?(e=s,t=l-1,n=a,i=b,r=_(g,c),u=d):(e=s-1,t=l,n=o,i=f,r=_(h,c),u=d)}else return c}}function R(e,t,n,i,r,u){for(;;){let s=e,l=t,a=n,f=i,c=r,d=u;if(s===0&&l===0)return c;if(l===0&&a.atLeastLength(1)){let h=a.head,o=a.tail;e=s-1,t=l,n=o,i=f,r=_(h,c),u=d}else if(s===0&&f.atLeastLength(1)){let h=f.head,o=f.tail;e=s,t=l-1,n=a,i=o,r=_(h,c),u=d}else if(a.atLeastLength(1)&&f.atLeastLength(1)){let h=a.head,o=a.tail,g=f.head,b=f.tail;d(g,h)instanceof T?(e=s-1,t=l,n=o,i=f,r=_(h,c),u=d):(e=s,t=l-1,n=a,i=b,r=_(g,c),u=d)}else return c}}function v(e,t,n,i){let r=S(t,2),u=e,s=_e(e,r);return t<3?i?R(r,t-r,u,s,m([]),n):K(r,t-r,u,s,m([]),n):i?R(r,t-r,v(u,r,n,!1),v(s,t-r,n,!1),m([]),n):K(r,t-r,v(u,r,n,!0),v(s,t-r,n,!0),m([]),n)}function de(e,t){return v(e,he(e),t,!0)}function pe(e,t,n){for(;;){let i=e,r=t,u=n,s=ae(i,r);if(s instanceof k)return _(r,u);s instanceof O?(e=i,t=r+1,n=_(r,u)):(e=i,t=r-1,n=_(r,u))}}function W(e,t){return pe(e,t,m([]))}function ge(e,t){for(;;){let n=e,i=t;if(n.hasLength(0))return i;{let r=n.head;e=n.tail,t=_(r[1],i)}}}function me(e){return de(e,(t,n)=>ye(t[0],n[0]))}function we(e){let n=q(e,m([]),(r,u)=>_([te(),u],r)),i=me(n);return ge(i,m([]))}function M(e,t){return e.isOk()?e[0]:t}function xe(e){return Math.ceil(e)}function J(e){return Math.round(e)}function Le(e,t){return Math.pow(e,t)}function te(){const e=Math.random();return e===1?te():e}function ye(e,t){return e===t?new k:e<t?new T:new O}function ve(e){return xe(e)}function ne(e,t){let n=ve(t)-t>0;return e<0&&n||e===0&&t<0?new $(void 0):new Z(Le(e,t))}function Ie(e){return ne(e,.5)}function Me(e){return-1*e}function Ee(e){return e>=0?J(e):0-J(Me(e))}function Fe(e){return Ee(e)}const P=640,re=480;function L(e,t){const n=e.data,i=t*4;return n[i]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3]}function x(e,t,n){const i=t*4,r=e.data;return r[i]=n>>24&255,r[i+1]=n>>16&255,r[i+2]=n>>8&255,r[i+3]=n&255,e}function Oe(e){const n=document.getElementById("canvas").getContext("2d"),i=n.getImageData(0,0,P,re),r=e(i);n.putImageData(r,0,0)}function be(e,t,n,i){let r=0;for(let u=-1;u<=1;u++){for(let s=-1;s<=1;s++){const l=t+u,a=n+s;l<0||l>=P||a<0||a>=re||i(L(e,a*P+l))&&r++}return r}}const p=640;function De(e,t,n){return L(e,n*p+t)}function j(e,t,n,i){return x(e,n*p+t,i)}const Ae=480;function Ne(){let t=m([4278190335,16711935,65535]),n=we(t),i=oe(n);return M(i,0)}function qe(e,t){let n=ee(t,p),i=S(t,p),r=De(e,n,i);return r===0||be(e,n,i,l=>r===l)===0?e:j(e,n,i,0)}const Pe=479;function Ce(e,t){let n=ee(t,p),i=S(t,p);if(i===Pe)return e;{let u=L(e,t),s=L(e,t+p),l=L(e,t+p-1),a=L(e,t+p+1);if(u===0)return e;if(s===0){let c=j(e,n,i+1,u);return x(c,t,0)}else if(l===0&&n>0){let c=x(e,t+p-1,u);return x(c,t,0)}else if(a===0&&n<639){let c=x(e,t+p+1,u);return x(c,t,0)}else return e}}function Xe(e,t,n){for(;;){let i=e,r=n;if(r===-1)return i;e=(()=>{let l=Ce(i,r);return qe(l,r)})(),n=r-1}}const y=20;function Ye(e,t,n){let i=Ne(),r=W(-1*y,y);return q(r,e,(u,s)=>{let l=W(-1*y,y);return q(l,u,(a,f)=>(()=>{let h=Ie((()=>{let g=H(f,2);return M(g,0)})()+(()=>{let g=H(s,2);return M(g,0)})()),o=M(h,0);return Fe(o)})()>y?a:j(a,t+f,n+s,i))})}function Be(e,t,n,i){return Oe(r=>{let s=t?Ye(r,n,i):r;return Xe(s,e,Ae*p)})}const I=1;let N=0,Q=performance.now(),C=!1,X=0,Y=0;const Se=document.getElementById("fps");function ie(){Be(N,C,X,Y);const e=performance.now(),t=1e3/(e-Q);N%60===0&&(Se.textContent=`FPS: ${Math.trunc(t)}`),Q=e,N++,requestAnimationFrame(ie)}function Te(){const e=document.getElementById("canvas"),t=e.getContext("2d"),n=t.getImageData(0,0,e.width,e.height),i=[[255,0,0,0],[0,255,0],[0,0,255]];for(let r=0;r<n.data.length;r+=4){const[u,s,l]=i[Math.floor(Math.random()*i.length)];n.data[r]=u,n.data[r+1]=s,n.data[r+2]=l,n.data[r+3]=255}t.putImageData(n,0,0),e.addEventListener("mousedown",r=>{C=!0,X=Math.trunc(r.offsetX/I),Y=Math.trunc(r.offsetY/I)}),e.addEventListener("mouseup",()=>{C=!1}),e.addEventListener("mousemove",r=>{X=Math.trunc(r.offsetX/I),Y=Math.trunc(r.offsetY/I)}),requestAnimationFrame(ie)}Te();
