var j=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var b=(t,e,r)=>(j(t,e,"read from private field"),r?r.call(t):e.get(t)),k=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},q=(t,e,r,i)=>(j(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerPolicy&&(u.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?u.credentials="include":n.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(n){if(n.ep)return;n.ep=!0;const u=r(n);fetch(n.href,u)}})();class F{withFields(e){let r=Object.keys(this).map(i=>i in e?e[i]:this[i]);return new this.constructor(...r)}}class T{static fromArray(e,r){let i=r||new J;for(let n=e.length-1;n>=0;--n)i=new Q(e[n],i);return i}[Symbol.iterator](){return new re(this)}toArray(){return[...this]}atLeastLength(e){for(let r of this){if(e<=0)return!0;e--}return e<=0}hasLength(e){for(let r of this){if(e<=0)return!1;e--}return e===0}countLength(){let e=0;for(let r of this)e++;return e}}function d(t,e){return new Q(t,e)}function g(t,e){return T.fromArray(t,e)}var L;class re{constructor(e){k(this,L,void 0);q(this,L,e)}next(){if(b(this,L)instanceof J)return{done:!0};{let{head:e,tail:r}=b(this,L);return q(this,L,r),{value:e,done:!1}}}}L=new WeakMap;class J extends T{}class Q extends T{constructor(e,r){super(),this.head=e,this.tail=r}}class M extends F{static isResult(e){return e instanceof M}}class U extends M{constructor(e){super(),this[0]=e}isOk(){return!0}}class V extends M{constructor(e){super(),this[0]=e}isOk(){return!1}}function ne(t,e){return e===0?0:t%e}function W(t,e){return Math.trunc(ie(t,e))}function ie(t,e){return e===0?0:t/e}class X extends F{}class Y extends F{}class O extends F{}function ue(t){return t}function z(t,e){let i=ue(t);return $(i,e)}function se(t,e){return t===e?new Y:t<e?new X:new O}function le(t,e){for(;;){let r=t,i=e;if(r.atLeastLength(1))t=r.tail,e=i+1;else return i}}function fe(t){return le(t,0)}function ae(t){if(t.hasLength(0))return new V(void 0);{let e=t.head;return new U(e)}}function ce(t,e){for(;;){let r=t,i=e;if(i<=0)return r;if(r.hasLength(0))return g([]);t=r.tail,e=i-1}}function P(t,e,r){for(;;){let i=t,n=e,u=r;if(i.hasLength(0))return n;{let s=i.head;t=i.tail,e=u(n,s),r=u}}}function D(t,e,r,i,n,u){for(;;){let s=t,a=e,f=r,l=i,c=n,o=u;if(s===0&&a===0)return c;if(a===0&&f.atLeastLength(1)){let h=f.head,_=f.tail;t=s-1,e=a,r=_,i=l,n=d(h,c),u=o}else if(s===0&&l.atLeastLength(1)){let h=l.head,_=l.tail;t=s,e=a-1,r=f,i=_,n=d(h,c),u=o}else if(f.atLeastLength(1)&&l.atLeastLength(1)){let h=f.head,_=f.tail,m=l.head,A=l.tail;o(h,m)instanceof O?(t=s,e=a-1,r=f,i=A,n=d(m,c),u=o):(t=s-1,e=a,r=_,i=l,n=d(h,c),u=o)}else return c}}function G(t,e,r,i,n,u){for(;;){let s=t,a=e,f=r,l=i,c=n,o=u;if(s===0&&a===0)return c;if(a===0&&f.atLeastLength(1)){let h=f.head,_=f.tail;t=s-1,e=a,r=_,i=l,n=d(h,c),u=o}else if(s===0&&l.atLeastLength(1)){let h=l.head,_=l.tail;t=s,e=a-1,r=f,i=_,n=d(h,c),u=o}else if(f.atLeastLength(1)&&l.atLeastLength(1)){let h=f.head,_=f.tail,m=l.head,A=l.tail;o(m,h)instanceof X?(t=s-1,e=a,r=_,i=l,n=d(h,c),u=o):(t=s,e=a-1,r=f,i=A,n=d(m,c),u=o)}else return c}}function v(t,e,r,i){let n=W(e,2),u=t,s=ce(t,n);return e<3?i?G(n,e-n,u,s,g([]),r):D(n,e-n,u,s,g([]),r):i?G(n,e-n,v(u,n,r,!1),v(s,e-n,r,!1),g([]),r):D(n,e-n,v(u,n,r,!0),v(s,e-n,r,!0),g([]),r)}function he(t,e){return v(t,fe(t),e,!0)}function _e(t,e,r){for(;;){let i=t,n=e,u=r,s=se(i,n);if(s instanceof Y)return d(n,u);s instanceof O?(t=i,e=n+1,r=d(n,u)):(t=i,e=n-1,r=d(n,u))}}function K(t,e){return _e(t,e,g([]))}function de(t,e){for(;;){let r=t,i=e;if(r.hasLength(0))return i;{let n=r.head;t=r.tail,e=d(n[1],i)}}}function oe(t){return he(t,(e,r)=>we(e[0],r[0]))}function pe(t){let r=P(t,g([]),(n,u)=>d([Z(),u],n)),i=oe(r);return de(i,g([]))}function E(t,e){return t.isOk()?t[0]:e}function me(t){return Math.ceil(t)}function R(t){return Math.round(t)}function ge(t,e){return Math.pow(t,e)}function Z(){const t=Math.random();return t===1?Z():t}function we(t,e){return t===e?new Y:t<e?new X:new O}function Le(t){return me(t)}function $(t,e){let r=Le(e)-e>0;return t<0&&r||t===0&&e<0?new V(void 0):new U(ge(t,e))}function ye(t){return $(t,.5)}function ve(t){return-1*t}function xe(t){return t>=0?R(t):0-R(ve(t))}function Ie(t){return xe(t)}function x(t,e){const r=t.data,i=e*4;return[r[i],r[i+1],r[i+2],r[i+3]]}function w(t,e,r){return t.data[e*4]=r[0],t.data[e*4+1]=r[1],t.data[e*4+2]=r[2],t.data[e*4+3]=r[3],t}function Ee(t){const e=document.getElementById("canvas"),r=e.getContext("2d"),i=r.getImageData(0,0,e.width,e.height),n=t(i);r.putImageData(n,0,0)}const p=640;function Fe(t,e,r,i){return w(t,r*p+e,i)}const Me=480;function Oe(){let e=g([[255,0,0,255],[0,255,0,255],[0,0,255,255]]),r=pe(e),i=ae(r);return E(i,[0,0,0,0])}const Ae=479;function be(t,e){let r=ne(e,p);if(W(e,p)===Ae)return t;{let u=x(t,e),s=x(t,e+p),a=x(t,e+p-1),f=x(t,e+p+1);if(u[0]===0&&u[1]===0&&u[2]===0&&u[3]===0)return t;if(s[0]===0&&s[1]===0&&s[2]===0&&s[3]===0){let c=w(t,e+p,u);return w(c,e,[0,0,0,0])}else if(a[0]===0&&a[1]===0&&a[2]===0&&a[3]===0&&r>0){let c=w(t,e+p-1,u);return w(c,e,[0,0,0,0])}else if(f[0]===0&&f[1]===0&&f[2]===0&&f[3]===0&&r<639){let c=w(t,e+p+1,u);return w(c,e,[0,0,0,0])}else return t}}function qe(t,e,r){for(;;){let i=t,n=r;if(n===-1)return i;t=be(i,n),r=n-1}}const y=10;function Ne(t,e,r){let i=Oe(),n=K(-1*y,y);return P(n,t,(u,s)=>{let a=K(-1*y,y);return P(a,u,(f,l)=>(()=>{let h=ye((()=>{let m=z(l,2);return E(m,0)})()+(()=>{let m=z(s,2);return E(m,0)})()),_=E(h,0);return Ie(_)})()>y?f:Fe(f,e+l,r+s,i))})}function Pe(t,e,r,i){return Ee(n=>{let s=e?Ne(n,r,i):n;return qe(s,t,Me*p)})}const I=1;let N=0,H=performance.now(),B=!1,C=0,S=0;const Be=document.getElementById("fps");function ee(){Pe(N,B,C,S);const t=performance.now(),e=1e3/(t-H);N%60===0&&(Be.textContent=`FPS: ${Math.trunc(e)}`),H=t,N++,requestAnimationFrame(ee)}function Ce(){const t=document.getElementById("canvas");t.addEventListener("mousedown",e=>{B=!0,C=Math.trunc(e.offsetX/I),S=Math.trunc(e.offsetY/I)}),t.addEventListener("mouseup",()=>{B=!1}),t.addEventListener("mousemove",e=>{C=Math.trunc(e.offsetX/I),S=Math.trunc(e.offsetY/I)}),requestAnimationFrame(ee)}Ce();
