var X=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var j=(e,t,r)=>(X(e,t,"read from private field"),r?r.call(e):t.get(e)),W=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},k=(e,t,r,n)=>(X(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(i){if(i.ep)return;i.ep=!0;const u=r(i);fetch(i.href,u)}})();class F{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}}class C{static fromArray(t,r){let n=r||new U;for(let i=t.length-1;i>=0;--i)n=new V(t[i],n);return n}[Symbol.iterator](){return new _e(this)}toArray(){return[...this]}atLeastLength(t){for(let r of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let r of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let r of this)t++;return t}}function o(e,t){return new V(e,t)}function g(e,t){return C.fromArray(e,t)}var L;class _e{constructor(t){W(this,L,void 0);k(this,L,t)}next(){if(j(this,L)instanceof U)return{done:!0};{let{head:t,tail:r}=j(this,L);return k(this,L,r),{value:t,done:!1}}}}L=new WeakMap;class U extends C{}class V extends C{constructor(t,r){super(),this.head=t,this.tail=r}}class b extends F{static isResult(t){return t instanceof b}}class Z extends b{constructor(t){super(),this[0]=t}isOk(){return!0}}class ee extends b{constructor(t){super(),this[0]=t}isOk(){return!1}}function oe(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!$(n)||!$(i)||!ve(n,i)||de(n,i)||ge(n,i)||we(n,i)||me(n,i)||ye(n,i)||Le(n,i))return!1;const s=Object.getPrototypeOf(n);if(s!==null&&typeof s.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[f,c]=he(n);for(let l of f(n))r.push(c(n,l),c(i,l))}return!0}function he(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function de(e,t){return e instanceof Date&&(e>t||e<t)}function ge(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function we(e,t){return Array.isArray(e)&&e.length!==t.length}function me(e,t){return e instanceof Map&&e.size!==t.size}function ye(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Le(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function $(e){return typeof e=="object"&&e!==null}function ve(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function te(e,t){return t===0?0:e%t}function R(e,t){return Math.trunc(re(e,t))}function re(e,t){return t===0?0:e/t}class Y extends F{}class D extends F{}class A extends F{}function ne(e){return e}function B(e,t){let n=ne(e);return le(n,t)}function xe(e,t){return e===t?new D:e<t?new Y:new A}function Ee(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1))e=r.tail,t=n+1;else return n}}function ie(e){return Ee(e,0)}function Me(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=o(i,n)}}}function ue(e){return Me(e,g([]))}function qe(e){if(e.hasLength(0))return new ee(void 0);{let t=e.head;return new Z(t)}}function Oe(e,t,r){for(;;){let n=e,i=t,u=r;if(n.hasLength(0))return ue(u);{let s=n.head,f=n.tail,c=i(s)?o(s,u):u;e=f,t=i,r=c}}}function Ie(e,t){return Oe(e,t,g([]))}function Fe(e,t,r){for(;;){let n=e,i=t,u=r;if(n.hasLength(0))return ue(u);{let s=n.head;e=n.tail,t=i,r=o(i(s),u)}}}function M(e,t){return Fe(e,t,g([]))}function be(e,t){for(;;){let r=e,n=t;if(n<=0)return r;if(r.hasLength(0))return g([]);e=r.tail,t=n-1}}function I(e,t,r){for(;;){let n=e,i=t,u=r;if(n.hasLength(0))return i;{let s=n.head;e=n.tail,t=u(i,s),r=u}}}function G(e,t,r,n,i,u){for(;;){let s=e,f=t,c=r,l=n,p=i,_=u;if(s===0&&f===0)return p;if(f===0&&c.atLeastLength(1)){let a=c.head,d=c.tail;e=s-1,t=f,r=d,n=l,i=o(a,p),u=_}else if(s===0&&l.atLeastLength(1)){let a=l.head,d=l.tail;e=s,t=f-1,r=c,n=d,i=o(a,p),u=_}else if(c.atLeastLength(1)&&l.atLeastLength(1)){let a=c.head,d=c.tail,w=l.head,P=l.tail;_(a,w)instanceof A?(e=s,t=f-1,r=c,n=P,i=o(w,p),u=_):(e=s-1,t=f,r=d,n=l,i=o(a,p),u=_)}else return p}}function K(e,t,r,n,i,u){for(;;){let s=e,f=t,c=r,l=n,p=i,_=u;if(s===0&&f===0)return p;if(f===0&&c.atLeastLength(1)){let a=c.head,d=c.tail;e=s-1,t=f,r=d,n=l,i=o(a,p),u=_}else if(s===0&&l.atLeastLength(1)){let a=l.head,d=l.tail;e=s,t=f-1,r=c,n=d,i=o(a,p),u=_}else if(c.atLeastLength(1)&&l.atLeastLength(1)){let a=c.head,d=c.tail,w=l.head,P=l.tail;_(w,a)instanceof Y?(e=s-1,t=f,r=d,n=l,i=o(a,p),u=_):(e=s,t=f-1,r=c,n=P,i=o(w,p),u=_)}else return p}}function E(e,t,r,n){let i=R(t,2),u=e,s=be(e,i);return t<3?n?K(i,t-i,u,s,g([]),r):G(i,t-i,u,s,g([]),r):n?K(i,t-i,E(u,i,r,!1),E(s,t-i,r,!1),g([]),r):G(i,t-i,E(u,i,r,!0),E(s,t-i,r,!0),g([]),r)}function Ae(e,t){return E(e,ie(e),t,!0)}function Pe(e,t,r){for(;;){let n=e,i=t,u=r,s=xe(n,i);if(s instanceof D)return o(i,u);s instanceof A?(e=n,t=i+1,r=o(i,u)):(e=n,t=i-1,r=o(i,u))}}function H(e,t){return Pe(e,t,g([]))}function je(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=o(i[1],n)}}}function ke(e){return Ae(e,(t,r)=>ze(t[0],r[0]))}function Se(e){let r=I(e,g([]),(i,u)=>o([se(),u],i)),n=ke(r);return je(n,g([]))}function v(e,t){return e.isOk()?e[0]:t}function Be(e){return Math.ceil(e)}function J(e){return Math.round(e)}function Ne(e){return Math.trunc(e)}function Te(e,t){return Math.pow(e,t)}function se(){const e=Math.random();return e===1?se():e}function ze(e,t){return e===t?new D:e<t?new Y:new A}function Ce(e){return Be(e)}function Re(e){return Ne(e)}function le(e,t){let r=Ce(t)-t>0;return e<0&&r||e===0&&t<0?new ee(void 0):new Z(Te(e,t))}function fe(e){return le(e,.5)}function Ye(e){return-1*e}function De(e){return e>=0?J(e):0-J(Ye(e))}function Xe(e){return De(e)}function y(e,t){const r=e.data,n=t*4;return[r[n],r[n+1],r[n+2],r[n+3]]}function m(e,t,r){return e.data[t*4]=r[0],e.data[t*4+1]=r[1],e.data[t*4+2]=r[2],e.data[t*4+3]=r[3],e}function We(e){const t=document.getElementById("canvas"),r=t.getContext("2d"),n=r.getImageData(0,0,t.width,t.height),i=e(n);r.putImageData(i,0,0)}const h=160;function $e(e,t,r,n){return m(e,r*h+t,n)}const Ge=120;function q(e){let r=I(e,0,(s,f)=>{let l=B(f,2),p=v(l,0);return(_=>_+s)(p)}),n=(s=>re(s,ne(ie(e))))(r),i=fe(n),u=v(i,0);return Re(u)}function Ke(){let t=g([[255,0,0,255],[0,255,0,255],[0,0,255,255]]),r=Se(t),n=qe(r);return v(n,[0,0,0,0])}const He=159,ce=119;function Je(e,t){let r=te(t,h);if(R(t,h)===ce||r===0||r===He)return e;{let u=y(e,t);if(u[0]===0&&u[1]===0&&u[2]===0&&u[3]===0)return e;{let s=y(e,t+h-1),f=y(e,t+h),c=y(e,t+h+1),l=(()=>{let _=g([u,s,f,c]);return Ie(_,a=>!oe(a,[0,0,0,0]))})();return m(e,t,[q(M(l,a=>a[0])),q(M(l,a=>a[1])),q(M(l,a=>a[2])),q(M(l,a=>a[3]))])}}}function Qe(e,t){let r=te(t,h);if(R(t,h)===ce)return e;{let u=y(e,t),s=y(e,t+h),f=y(e,t+h-1),c=y(e,t+h+1);if(u[0]===0&&u[1]===0&&u[2]===0&&u[3]===0)return e;if(s[0]===0&&s[1]===0&&s[2]===0&&s[3]===0){let p=m(e,t+h,u);return m(p,t,[0,0,0,0])}else if(f[0]===0&&f[1]===0&&f[2]===0&&f[3]===0&&r>0){let p=m(e,t+h-1,u);return m(p,t,[0,0,0,0])}else if(c[0]===0&&c[1]===0&&c[2]===0&&c[3]===0&&r<159){let p=m(e,t+h+1,u);return m(p,t,[0,0,0,0])}else return e}}function Ue(e,t,r){for(;;){let n=e,i=r;if(i===-1)return n;e=(()=>{let f=Qe(n,i);return Je(f,i)})(),r=i-1}}const x=10;function Ve(e,t,r){let n=Ke(),i=H(-1*x,x);return I(i,e,(u,s)=>{let f=H(-1*x,x);return I(f,u,(c,l)=>(()=>{let a=fe((()=>{let w=B(l,2);return v(w,0)})()+(()=>{let w=B(s,2);return v(w,0)})()),d=v(a,0);return Xe(d)})()>x?c:$e(c,t+l,r+s,n))})}function Ze(e,t,r,n){return We(i=>{let s=t?Ve(i,r,n):i;return Ue(s,e,Ge*h)})}const O=4;let S=0,Q=performance.now(),N=!1,T=0,z=0;const et=document.getElementById("fps");function ae(){Ze(S,N,T,z);const e=performance.now(),t=1e3/(e-Q);S%60===0&&(et.textContent=`FPS: ${Math.trunc(t)}`),Q=e,S++,requestAnimationFrame(ae)}function tt(){const e=document.getElementById("canvas");e.addEventListener("mousedown",t=>{N=!0,T=Math.trunc(t.offsetX/O),z=Math.trunc(t.offsetY/O)}),e.addEventListener("mouseup",()=>{N=!1}),e.addEventListener("mousemove",t=>{T=Math.trunc(t.offsetX/O),z=Math.trunc(t.offsetY/O)}),requestAnimationFrame(ae)}tt();
