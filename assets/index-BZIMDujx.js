var St=Object.defineProperty;var Dt=(t,e,n)=>e in t?St(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var U=(t,e,n)=>(Dt(t,typeof e!="symbol"?e+"":e,n),n),dt=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var W=(t,e,n)=>(dt(t,e,"read from private field"),n?n.call(t):e.get(t)),pt=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},J=(t,e,n,r)=>(dt(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function _(){}function vt(t){return t()}function ht(){return Object.create(null)}function P(t){t.forEach(vt)}function Et(t){return typeof t=="function"}function V(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Nt(t){return Object.keys(t).length===0}function Bt(t,...e){if(t==null){for(const r of e)r(void 0);return _}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function kt(t,e,n){t.$$.on_destroy.push(Bt(e,n))}function f(t,e){t.appendChild(e)}function Y(t,e,n){t.insertBefore(e,n||null)}function B(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function A(t){return document.createTextNode(t)}function v(){return A(" ")}function L(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function a(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function It(t){return t===""?null:+t}function jt(t){return Array.from(t.childNodes)}function Pt(t,e){e=""+e,t.data!==e&&(t.data=e)}function q(t,e){t.value=e??""}function qt(t,e,n,r){t.style.setProperty(e,n,"")}let j;function N(t){j=t}function Rt(){if(!j)throw new Error("Function called outside component initialization");return j}function zt(t){Rt().$$.on_mount.push(t)}const T=[],mt=[];let M=[];const _t=[],Xt=Promise.resolve();let et=!1;function Yt(){et||(et=!0,Xt.then(Lt))}function nt(t){M.push(t)}const Q=new Set;let C=0;function Lt(){if(C!==0)return;const t=j;do{try{for(;C<T.length;){const e=T[C];C++,N(e),Vt(e.$$)}}catch(e){throw T.length=0,C=0,e}for(N(null),T.length=0,C=0;mt.length;)mt.pop()();for(let e=0;e<M.length;e+=1){const n=M[e];Q.has(n)||(Q.add(n),n())}M.length=0}while(T.length);for(;_t.length;)_t.pop()();et=!1,Q.clear(),N(t)}function Vt(t){if(t.fragment!==null){t.update(),P(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(nt)}}function Gt(t){const e=[],n=[];M.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),M=e}const X=new Set;let Ht;function rt(t,e){t&&t.i&&(X.delete(t),t.i(e))}function gt(t,e,n,r){if(t&&t.o){if(X.has(t))return;X.add(t),Ht.c.push(()=>{X.delete(t)}),t.o(e)}}function bt(t){t&&t.c()}function it(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),nt(()=>{const s=t.$$.on_mount.map(vt).filter(Et);t.$$.on_destroy?t.$$.on_destroy.push(...s):P(s),t.$$.on_mount=[]}),i.forEach(nt)}function st(t,e){const n=t.$$;n.fragment!==null&&(Gt(n.after_update),P(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Kt(t,e){t.$$.dirty[0]===-1&&(T.push(t),Yt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ut(t,e,n,r,i,s,o=null,l=[-1]){const c=j;N(t);const u=t.$$={fragment:null,ctx:[],props:s,update:_,not_equal:i,bound:ht(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:ht(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(m,b,...w)=>{const g=w.length?w[0]:b;return u.ctx&&i(u.ctx[m],u.ctx[m]=g)&&(!u.skip_bound&&u.bound[m]&&u.bound[m](g),d&&Kt(t,m)),b}):[],u.update(),d=!0,P(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const m=jt(e.target);u.fragment&&u.fragment.l(m),m.forEach(B)}else u.fragment&&u.fragment.c();e.intro&&rt(t.$$.fragment),it(t,e.target,e.anchor),Lt()}N(c)}class ot{constructor(){U(this,"$$");U(this,"$$set")}$destroy(){st(this,1),this.$destroy=_}$on(e,n){if(!Et(n))return _;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Nt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ut="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ut);class G{withFields(e){let n=Object.keys(this).map(r=>r in e?e[r]:this[r]);return new this.constructor(...n)}}class ct{static fromArray(e,n){let r=n||new Ct;for(let i=e.length-1;i>=0;--i)r=new Ft(e[i],r);return r}[Symbol.iterator](){return new Jt(this)}toArray(){return[...this]}atLeastLength(e){for(let n of this){if(e<=0)return!0;e--}return e<=0}hasLength(e){for(let n of this){if(e<=0)return!1;e--}return e===0}countLength(){let e=0;for(let n of this)e++;return e}}function Z(t,e){return new Ft(t,e)}function Wt(t,e){return ct.fromArray(t,e)}var k;class Jt{constructor(e){pt(this,k,void 0);J(this,k,e)}next(){if(W(this,k)instanceof Ct)return{done:!0};{let{head:e,tail:n}=W(this,k);return J(this,k,n),{value:e,done:!1}}}}k=new WeakMap;class Ct extends ct{}class Ft extends ct{constructor(e,n){super(),this.head=e,this.tail=n}}class H extends G{static isResult(e){return e instanceof H}}class Qt extends H{constructor(e){super(),this[0]=e}isOk(){return!0}}let Zt=class extends H{constructor(e){super(),this[0]=e}isOk(){return!1}};function te(t,e){return t%e}function ee(t,e){return Math.trunc(ne(t,e))}function ne(t,e){return t/e}class re extends G{}class Tt extends G{}class Ot extends G{}function ie(t){return t}function $t(t,e){let r=ie(t);return At(r,e)}function se(t,e){return t===e?new Tt:t<e?new re:new Ot}function wt(t,e,n){for(;;){let r=t,i=e,s=n;if(r.hasLength(0))return i;{let o=r.head;t=r.tail,e=s(i,o),n=s}}}function ue(t,e,n){for(;;){let r=t,i=e,s=n,o=se(r,i);if(o instanceof Tt)return Z(i,s);o instanceof Ot?(t=r,e=i+1,n=Z(i,s)):(t=r,e=i-1,n=Z(i,s))}}function yt(t,e){return ue(t,e,Wt([]))}function tt(t,e){return t.isOk()?t[0]:e}function oe(t){return Math.ceil(t)}function xt(t){return Math.round(t)}function ce(t,e){return Math.pow(t,e)}function le(t){return oe(t)}function At(t,e){let n=le(e)-e>0;return t<0&&n||t===0&&e<0?new Zt(void 0):new Qt(ce(t,e))}function ae(t){return At(t,.5)}function fe(t){return-1*t}function de(t){return t>=0?xt(t):0-xt(fe(t))}function pe(t){return de(t)}const he=640,me=480;function R(t,e){const n=t.data,r=e*4;return n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]}function O(t,e,n){const r=e*4,i=t.data;return i[r]=n>>24&255,i[r+1]=n>>16&255,i[r+2]=n>>8&255,i[r+3]=n&255,t}function _e(t){const n=document.getElementById("canvas").getContext("2d"),r=n.getImageData(0,0,he,me),i=t(r);n.putImageData(i,0,0)}const $=640;function Mt(t,e,n,r){return O(t,n*$+e,r)}const ge=480;function be(t,e,n,r,i){let s=yt(-1*r,r);return wt(s,t,(o,l)=>{let c=yt(-1*r,r);return wt(c,o,(u,d)=>(()=>{let w=ae((()=>{let I=$t(d,2);return tt(I,0)})()+(()=>{let I=$t(l,2);return tt(I,0)})()),g=tt(w,0);return pe(g)})()>r?u:Mt(u,e+d,n+l,i))})}const $e=479;function we(t,e){let n=te(e,$),r=ee(e,$);if(r===$e)return t;{let s=R(t,e),o=R(t,e+$),l=R(t,e+$-1),c=R(t,e+$+1);if(s===0)return t;if(o===0){let d=Mt(t,n,r+1,s);return O(d,e,0)}else if(l===0&&n>0){let d=O(t,e+$-1,s);return O(d,e,0)}else if(c===0&&n<639){let d=O(t,e+$+1,s);return O(d,e,0)}else return t}}function ye(t,e){for(;;){let n=t,r=e;if(r===-1)return n;t=we(n,r),e=r-1}}function xe(t,e,n,r,i){return _e(s=>{let l=t?be(s,e,n,r,i):s;return ye(l,ge*$)})}const F=[];function ve(t,e=_){let n;const r=new Set;function i(l){if(V(t,l)&&(t=l,n)){const c=!F.length;for(const u of r)u[1](),F.push(u,t);if(c){for(let u=0;u<F.length;u+=2)F[u][0](F[u+1]);F.length=0}}}function s(l){i(l(t))}function o(l,c=_){const u=[l,c];return r.add(u),r.size===1&&(n=e(i,s)||_),l(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}const z=1;let p={lastFrameTime:performance.now(),currentFrameTime:performance.now(),mouseDown:!1,mouseX:0,mouseY:0,brushSize:10,brushColour:"#ff0000",autoTick:!0};const E=ve(p);E.subscribe(t=>{p=t});function lt(){xe(p.mouseDown,p.mouseX,p.mouseY,p.brushSize,parseInt(p.brushColour.substring(1),16)<<8|255),E.update(t=>({...t,lastFrameTime:t.currentFrameTime,currentFrameTime:performance.now()})),p.autoTick&&requestAnimationFrame(lt)}function Ee(){const t=document.getElementById("canvas");t.addEventListener("mousedown",e=>{p.mouseDown=!0,p.mouseX=Math.trunc(e.offsetX/z),p.mouseY=Math.trunc(e.offsetY/z)}),t.addEventListener("mouseup",()=>{p.mouseDown=!1}),t.addEventListener("mousemove",e=>{p.mouseX=Math.trunc(e.offsetX/z),p.mouseY=Math.trunc(e.offsetY/z)}),requestAnimationFrame(lt)}function ke(t){let e,n,r,i,s,o,l,c,u,d,m,b,w,g,I,x,at,S,K,ft;return{c(){e=h("div"),n=h("label"),r=A(`Brush size:
        `),i=h("input"),s=v(),o=h("label"),l=A(`Brush colour:
        `),c=h("input"),u=v(),d=h("button"),d.textContent="Insert noise",m=v(),b=h("button"),b.textContent="Clear canvas",w=v(),g=h("label"),I=A(`Auto tick:
        `),x=h("input"),at=v(),S=h("button"),S.textContent="Tick frame",a(i,"class","rounded-md bg-slate-900 p-2 outline-none ring-teal-600 transition-all focus:ring-2"),a(i,"type","number"),a(i,"min","0"),a(i,"max","50"),a(i,"step","1"),a(n,"class","flex flex-row items-center justify-between"),a(c,"class","rounded-md bg-slate-900 p-2 outline-none ring-teal-600 transition-all focus:ring-2"),a(c,"type","color"),a(o,"class","flex flex-row items-center justify-between"),a(d,"class","rounded-md bg-teal-600 p-2 transition-colors hover:bg-teal-700"),a(b,"class","rounded-md bg-teal-600 p-2 transition-colors hover:bg-teal-700"),a(x,"class","rounded-md bg-slate-900 p-2 outline-none ring-teal-600 transition-all focus:ring-2"),a(x,"type","checkbox"),a(g,"class","flex flex-row items-center justify-between"),a(S,"class","rounded-md bg-teal-600 p-2 transition-colors hover:bg-teal-700"),a(e,"class","grid grid-cols-2 gap-2 rounded-b-lg bg-slate-950 p-4")},m(y,D){Y(y,e,D),f(e,n),f(n,r),f(n,i),q(i,t[0].brushSize),f(e,s),f(e,o),f(o,l),f(o,c),q(c,t[0].brushColour),f(e,u),f(e,d),f(e,m),f(e,b),f(e,w),f(e,g),f(g,I),f(g,x),x.checked=t[0].autoTick,f(e,at),f(e,S),K||(ft=[L(i,"input",t[1]),L(c,"input",t[2]),L(d,"click",Ie),L(b,"click",Le),L(x,"change",t[3]),L(S,"click",lt)],K=!0)},p(y,[D]){D&1&&It(i.value)!==y[0].brushSize&&q(i,y[0].brushSize),D&1&&q(c,y[0].brushColour),D&1&&(x.checked=y[0].autoTick)},i:_,o:_,d(y){y&&B(e),K=!1,P(ft)}}}function Ie(){const t=document.getElementById("canvas"),e=t.getContext("2d"),n=e.getImageData(0,0,t.width,t.height),r=[[255,0,0,0],[0,255,0],[0,0,255]];for(let i=0;i<n.data.length;i+=4){if(n.data[i+3])continue;const[s,o,l]=r[Math.floor(Math.random()*r.length)];n.data[i]=s,n.data[i+1]=o,n.data[i+2]=l,n.data[i+3]=255}e.putImageData(n,0,0)}function Le(){const t=document.getElementById("canvas");t.getContext("2d").clearRect(0,0,t.width,t.height)}function Ce(t,e,n){let r;kt(t,E,l=>n(0,r=l));function i(){r.brushSize=It(this.value),E.set(r)}function s(){r.brushColour=this.value,E.set(r)}function o(){r.autoTick=this.checked,E.set(r)}return[r,i,s,o]}class Fe extends ot{constructor(e){super(),ut(this,e,Ce,ke,V,{})}}function Te(t){let e,n,r;return{c(){e=h("div"),n=A("FPS: "),r=A(t[0]),a(e,"class","absolute bottom-2 right-2 text-slate-500")},m(i,s){Y(i,e,s),f(e,n),f(e,r)},p(i,[s]){s&1&&Pt(r,i[0])},i:_,o:_,d(i){i&&B(e)}}}const Oe=200;function Ae(t,e,n){let r;kt(t,E,o=>n(2,r=o));let i=0,s=performance.now();return t.$$.update=()=>{if(t.$$.dirty&6){const o=performance.now();o-s>Oe&&(n(1,s=o),n(0,i=Math.trunc(1e3/(r.currentFrameTime-r.lastFrameTime))))}},[i,s,r]}class Me extends ot{constructor(e){super(),ut(this,e,Ae,Te,V,{})}}function Se(t){let e,n,r,i,s,o,l;return i=new Fe({}),o=new Me({}),{c(){e=h("div"),n=h("canvas"),r=v(),bt(i.$$.fragment),s=v(),bt(o.$$.fragment),a(n,"class","scale h-[480px] w-full bg-black bg-opacity-25"),qt(n,"image-rendering","pixelated"),a(n,"id","canvas"),a(n,"width","640"),a(n,"height","480"),a(e,"class","w-[640px]")},m(c,u){Y(c,e,u),f(e,n),f(e,r),it(i,e,null),Y(c,s,u),it(o,c,u),l=!0},p:_,i(c){l||(rt(i.$$.fragment,c),rt(o.$$.fragment,c),l=!0)},o(c){gt(i.$$.fragment,c),gt(o.$$.fragment,c),l=!1},d(c){c&&(B(e),B(s)),st(i),st(o,c)}}}function De(t){return zt(()=>{Ee()}),[]}class Ne extends ot{constructor(e){super(),ut(this,e,De,Se,V,{})}}new Ne({target:document.getElementById("app")});
