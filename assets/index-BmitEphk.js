var Y=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var b=(t,e,r)=>(Y(t,e,"read from private field"),r?r.call(t):e.get(t)),j=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},A=(t,e,r,i)=>(Y(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerPolicy&&(u.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?u.credentials="include":n.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(n){if(n.ep)return;n.ep=!0;const u=r(n);fetch(n.href,u)}})();class F{withFields(e){let r=Object.keys(this).map(i=>i in e?e[i]:this[i]);return new this.constructor(...r)}}class S{static fromArray(e,r){let i=r||new K;for(let n=e.length-1;n>=0;--n)i=new R(e[n],i);return i}[Symbol.iterator](){return new ce(this)}toArray(){return[...this]}atLeastLength(e){for(let r of this){if(e<=0)return!0;e--}return e<=0}hasLength(e){for(let r of this){if(e<=0)return!1;e--}return e===0}countLength(){let e=0;for(let r of this)e++;return e}}function g(t,e){return new R(t,e)}function o(t,e){return S.fromArray(t,e)}var L;class ce{constructor(e){j(this,L,void 0);A(this,L,e)}next(){if(b(this,L)instanceof K)return{done:!0};{let{head:e,tail:r}=b(this,L);return A(this,L,r),{value:e,done:!1}}}}L=new WeakMap;class K extends S{}class R extends S{constructor(e,r){super(),this.head=e,this.tail=r}}class M extends F{static isResult(e){return e instanceof M}}class z extends M{constructor(e){super(),this[0]=e}isOk(){return!0}}class H extends M{constructor(e){super(),this[0]=e}isOk(){return!1}}function he(t,e){return e===0?0:t%e}function T(t,e){return Math.trunc(J(t,e))}function J(t,e){return e===0?0:t/e}class Q extends F{}class _e extends F{}class U extends F{}function V(t){return t}function pe(t,e){let i=V(t);return ee(i,e)}function de(t,e){for(;;){let r=t,i=e;if(r.atLeastLength(1))t=r.tail,e=i+1;else return i}}function W(t){return de(t,0)}function oe(t){if(t.hasLength(0))return new H(void 0);{let e=t.head;return new z(e)}}function ge(t,e){for(;;){let r=t,i=e;if(i<=0)return r;if(r.hasLength(0))return o([]);t=r.tail,e=i-1}}function Z(t,e,r){for(;;){let i=t,n=e,u=r;if(i.hasLength(0))return n;{let s=i.head;t=i.tail,e=u(n,s),r=u}}}function k(t,e,r,i,n,u){for(;;){let s=t,l=e,a=r,f=i,c=n,h=u;if(s===0&&l===0)return c;if(l===0&&a.atLeastLength(1)){let _=a.head,p=a.tail;t=s-1,e=l,r=p,i=f,n=g(_,c),u=h}else if(s===0&&f.atLeastLength(1)){let _=f.head,p=f.tail;t=s,e=l-1,r=a,i=p,n=g(_,c),u=h}else if(a.atLeastLength(1)&&f.atLeastLength(1)){let _=a.head,p=a.tail,w=f.head,y=f.tail;h(_,w)instanceof U?(t=s,e=l-1,r=a,i=y,n=g(w,c),u=h):(t=s-1,e=l,r=p,i=f,n=g(_,c),u=h)}else return c}}function D(t,e,r,i,n,u){for(;;){let s=t,l=e,a=r,f=i,c=n,h=u;if(s===0&&l===0)return c;if(l===0&&a.atLeastLength(1)){let _=a.head,p=a.tail;t=s-1,e=l,r=p,i=f,n=g(_,c),u=h}else if(s===0&&f.atLeastLength(1)){let _=f.head,p=f.tail;t=s,e=l-1,r=a,i=p,n=g(_,c),u=h}else if(a.atLeastLength(1)&&f.atLeastLength(1)){let _=a.head,p=a.tail,w=f.head,y=f.tail;h(w,_)instanceof Q?(t=s-1,e=l,r=p,i=f,n=g(_,c),u=h):(t=s,e=l-1,r=a,i=y,n=g(w,c),u=h)}else return c}}function v(t,e,r,i){let n=T(e,2),u=t,s=ge(t,n);return e<3?i?D(n,e-n,u,s,o([]),r):k(n,e-n,u,s,o([]),r):i?D(n,e-n,v(u,n,r,!1),v(s,e-n,r,!1),o([]),r):k(n,e-n,v(u,n,r,!0),v(s,e-n,r,!0),o([]),r)}function me(t,e){return v(t,W(t),e,!0)}function we(t,e){for(;;){let r=t,i=e;if(r.hasLength(0))return i;{let n=r.head;t=r.tail,e=g(n[1],i)}}}function Le(t){return me(t,(e,r)=>Ee(e[0],r[0]))}function ye(t){let r=Z(t,o([]),(n,u)=>g([$(),u],n)),i=Le(r);return we(i,o([]))}function N(t,e){return t.isOk()?t[0]:e}function ve(t){return Math.ceil(t)}function xe(t){return Math.trunc(t)}function Ie(t,e){return Math.pow(t,e)}function $(){const t=Math.random();return t===1?$():t}function Ee(t,e){return t===e?new _e:t<e?new Q:new U}function Fe(t){return ve(t)}function Me(t){return xe(t)}function ee(t,e){let r=Fe(e)-e>0;return t<0&&r||t===0&&e<0?new H(void 0):new z(Ie(t,e))}function Oe(t){return ee(t,.5)}function x(t,e){const r=t.data,i=e*4;return[r[i],r[i+1],r[i+2],r[i+3]]}function m(t,e,r){return t.data[e*4]=r[0],t.data[e*4+1]=r[1],t.data[e*4+2]=r[2],t.data[e*4+3]=r[3],t}function be(t){const e=document.getElementById("canvas"),r=e.getContext("2d"),i=r.getImageData(0,0,e.width,e.height),n=t(i);r.putImageData(n,0,0)}const d=160,X=120;function I(t){let r=Z(t,0,(s,l)=>{let f=pe(l,2),c=N(f,0);return(h=>h+s)(c)}),i=(s=>J(s,V(W(t))))(r),n=Oe(i),u=N(n,0);return Me(u)}function Ae(){let e=o([[255,0,0,255],[0,255,0,255],[0,0,255,255]]),r=ye(e),i=oe(r);return N(i,[0,0,0,0])}function qe(t,e){let r=he(e,d);if(T(e,d)===X-1)return t;{let u=x(t,e),s=x(t,e+d),l=x(t,e+d-1),a=x(t,e+d+1);if(u[0]===0&&u[1]===0&&u[2]===0&&u[3]===0)return t;if(s[0]===0&&s[1]===0&&s[2]===0&&s[3]===0){let c=m(t,e+d,u);return m(c,e,[0,0,0,0])}else if(l[0]===0&&l[1]===0&&l[2]===0&&l[3]===0&&r>0){let c=m(t,e+d-1,u);return m(c,e,[0,0,0,0])}else if(a[0]===0&&a[1]===0&&a[2]===0&&a[3]===0&&r<159){let c=m(t,e+d+1,u);return m(c,e,[0,0,0,0])}else if(r<159&&r>0){let f=u[0],c=u[1],h=u[2],_=u[3],p=s[0],w=s[1],y=s[2],O=s[3],re=l[0],ne=l[1],ie=l[2],ue=l[3],se=a[0],le=a[1],fe=a[2],ae=a[3];return m(t,e+d,[I(o([f,p,re,se])),I(o([c,w,ne,le])),I(o([h,y,ie,fe])),I(o([_,O,ue,ae]))])}else return t}}function Ne(t,e,r){for(;;){let i=t,n=r;if(n===-1)return i;t=T(n,d)===X-1?i:qe(i,n),r=n-1}}function Pe(t,e,r,i){return be(n=>{let s=e?m(n,i*d+r,Ae()):n;return Ne(s,t,X*d)})}const E=4;let q=0,G=performance.now(),P=!1,B=0,C=0;const Be=document.getElementById("fps");function te(){Pe(q,P,B,C);const t=performance.now(),e=1e3/(t-G);q%60===0&&(Be.textContent=`FPS: ${Math.trunc(e)}`),G=t,q++,requestAnimationFrame(te)}function Ce(){const t=document.getElementById("canvas");t.addEventListener("mousedown",e=>{P=!0,B=Math.trunc(e.offsetX/E),C=Math.trunc(e.offsetY/E)}),t.addEventListener("mouseup",()=>{P=!1}),t.addEventListener("mousemove",e=>{B=Math.trunc(e.offsetX/E),C=Math.trunc(e.offsetY/E)}),requestAnimationFrame(te)}Ce();
