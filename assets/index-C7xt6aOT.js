var Pe=Object.defineProperty;var Ce=(e,t,n)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var k=(e,t,n)=>(Ce(e,typeof t!="symbol"?t+"":t,n),n),ie=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var B=(e,t,n)=>(ie(e,t,"read from private field"),n?n.call(e):t.get(e)),ue=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},z=(e,t,n,r)=>(ie(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(i){if(i.ep)return;i.ep=!0;const u=n(i);fetch(i.href,u)}})();function w(){}function me(e){return e()}function se(){return Object.create(null)}function q(e){e.forEach(me)}function ge(e){return typeof e=="function"}function Q(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function qe(e){return Object.keys(e).length===0}function Xe(e,...t){if(e==null){for(const r of t)r(void 0);return w}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Ye(e,t,n){e.$$.on_destroy.push(Xe(t,n))}function fe(e,t){e.appendChild(t)}function N(e,t,n){e.insertBefore(t,n||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function V(e){return document.createElement(e)}function H(e){return document.createTextNode(e)}function le(){return H(" ")}function M(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Re(e){return Array.from(e.childNodes)}function je(e,t){t=""+t,e.data!==t&&(e.data=t)}function ke(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}let D;function T(e){D=e}function Be(){if(!D)throw new Error("Function called outside component initialization");return D}function ze(e){Be().$$.on_mount.push(e)}const $=[],ce=[];let F=[];const ae=[],Ge=Promise.resolve();let K=!1;function Ve(){K||(K=!0,Ge.then(we))}function U(e){F.push(e)}const G=new Set;let b=0;function we(){if(b!==0)return;const e=D;do{try{for(;b<$.length;){const t=$[b];b++,T(t),He(t.$$)}}catch(t){throw $.length=0,b=0,t}for(T(null),$.length=0,b=0;ce.length;)ce.pop()();for(let t=0;t<F.length;t+=1){const n=F[t];G.has(n)||(G.add(n),n())}F.length=0}while($.length);for(;ae.length;)ae.pop()();K=!1,G.clear(),T(e)}function He(e){if(e.fragment!==null){e.update(),q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(U)}}function Ke(e){const t=[],n=[];F.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),F=t}const P=new Set;let Ue;function xe(e,t){e&&e.i&&(P.delete(e),e.i(t))}function We(e,t,n,r){if(e&&e.o){if(P.has(e))return;P.add(e),Ue.c.push(()=>{P.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Je(e){e&&e.c()}function ye(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),U(()=>{const u=e.$$.on_mount.map(me).filter(ge);e.$$.on_destroy?e.$$.on_destroy.push(...u):q(u),e.$$.on_mount=[]}),i.forEach(U)}function be(e,t){const n=e.$$;n.fragment!==null&&(Ke(n.after_update),q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Qe(e,t){e.$$.dirty[0]===-1&&($.push(e),Ve(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Le(e,t,n,r,i,u,s=null,l=[-1]){const c=D;T(e);const f=e.$$={fragment:null,ctx:[],props:u,update:w,not_equal:i,bound:se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:se(),dirty:l,skip_bound:!1,root:t.target||c.$$.root};s&&s(f.root);let a=!1;if(f.ctx=n?n(e,t.props||{},(o,d,...h)=>{const m=h.length?h[0]:d;return f.ctx&&i(f.ctx[o],f.ctx[o]=m)&&(!f.skip_bound&&f.bound[o]&&f.bound[o](m),a&&Qe(e,o)),d}):[],f.update(),a=!0,q(f.before_update),f.fragment=r?r(f.ctx):!1,t.target){if(t.hydrate){const o=Re(t.target);f.fragment&&f.fragment.l(o),o.forEach(E)}else f.fragment&&f.fragment.c();t.intro&&xe(e.$$.fragment),ye(e,t.target,t.anchor),we()}T(c)}class $e{constructor(){k(this,"$$");k(this,"$$set")}$destroy(){be(this,1),this.$destroy=w}$on(t,n){if(!ge(n))return w;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!qe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ze="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ze);class X{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class Z{static fromArray(t,n){let r=n||new ve;for(let i=t.length-1;i>=0;--i)r=new Ee(t[i],r);return r}[Symbol.iterator](){return new et(this)}toArray(){return[...this]}atLeastLength(t){for(let n of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let n of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let n of this)t++;return t}}function p(e,t){return new Ee(e,t)}function x(e,t){return Z.fromArray(e,t)}var y;class et{constructor(t){ue(this,y,void 0);z(this,y,t)}next(){if(B(this,y)instanceof ve)return{done:!0};{let{head:t,tail:n}=B(this,y);return z(this,y,n),{value:t,done:!1}}}}y=new WeakMap;class ve extends Z{}class Ee extends Z{constructor(t,n){super(),this.head=t,this.tail=n}}class Y extends X{static isResult(t){return t instanceof Y}}class Ie extends Y{constructor(t){super(),this[0]=t}isOk(){return!0}}let Fe=class extends Y{constructor(t){super(),this[0]=t}isOk(){return!1}};function Me(e,t){return t===0?0:e%t}function ee(e,t){return Math.trunc(tt(e,t))}function tt(e,t){return t===0?0:e/t}class te extends X{}class ne extends X{}class R extends X{}function nt(e){return e}function oe(e,t){let r=nt(e);return Ne(r,t)}function rt(e,t){return e===t?new ne:e<t?new te:new R}function it(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1))e=n.tail,t=r+1;else return r}}function ut(e){return it(e,0)}function st(e){if(e.hasLength(0))return new Fe(void 0);{let t=e.head;return new Ie(t)}}function ft(e,t){for(;;){let n=e,r=t;if(r<=0)return n;if(n.hasLength(0))return x([]);e=n.tail,t=r-1}}function W(e,t,n){for(;;){let r=e,i=t,u=n;if(r.hasLength(0))return i;{let s=r.head;e=r.tail,t=u(i,s),n=u}}}function de(e,t,n,r,i,u){for(;;){let s=e,l=t,c=n,f=r,a=i,o=u;if(s===0&&l===0)return a;if(l===0&&c.atLeastLength(1)){let d=c.head,h=c.tail;e=s-1,t=l,n=h,r=f,i=p(d,a),u=o}else if(s===0&&f.atLeastLength(1)){let d=f.head,h=f.tail;e=s,t=l-1,n=c,r=h,i=p(d,a),u=o}else if(c.atLeastLength(1)&&f.atLeastLength(1)){let d=c.head,h=c.tail,m=f.head,j=f.tail;o(d,m)instanceof R?(e=s,t=l-1,n=c,r=j,i=p(m,a),u=o):(e=s-1,t=l,n=h,r=f,i=p(d,a),u=o)}else return a}}function he(e,t,n,r,i,u){for(;;){let s=e,l=t,c=n,f=r,a=i,o=u;if(s===0&&l===0)return a;if(l===0&&c.atLeastLength(1)){let d=c.head,h=c.tail;e=s-1,t=l,n=h,r=f,i=p(d,a),u=o}else if(s===0&&f.atLeastLength(1)){let d=f.head,h=f.tail;e=s,t=l-1,n=c,r=h,i=p(d,a),u=o}else if(c.atLeastLength(1)&&f.atLeastLength(1)){let d=c.head,h=c.tail,m=f.head,j=f.tail;o(m,d)instanceof te?(e=s-1,t=l,n=h,r=f,i=p(d,a),u=o):(e=s,t=l-1,n=c,r=j,i=p(m,a),u=o)}else return a}}function A(e,t,n,r){let i=ee(t,2),u=e,s=ft(e,i);return t<3?r?he(i,t-i,u,s,x([]),n):de(i,t-i,u,s,x([]),n):r?he(i,t-i,A(u,i,n,!1),A(s,t-i,n,!1),x([]),n):de(i,t-i,A(u,i,n,!0),A(s,t-i,n,!0),x([]),n)}function lt(e,t){return A(e,ut(e),t,!0)}function ct(e,t,n){for(;;){let r=e,i=t,u=n,s=rt(r,i);if(s instanceof ne)return p(i,u);s instanceof R?(e=r,t=i+1,n=p(i,u)):(e=r,t=i-1,n=p(i,u))}}function _e(e,t){return ct(e,t,x([]))}function at(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=p(i[1],r)}}}function ot(e){return lt(e,(t,n)=>pt(t[0],n[0]))}function dt(e){let n=W(e,x([]),(i,u)=>p([Oe(),u],i)),r=ot(n);return at(r,x([]))}function C(e,t){return e.isOk()?e[0]:t}function ht(e){return Math.ceil(e)}function pe(e){return Math.round(e)}function _t(e,t){return Math.pow(e,t)}function Oe(){const e=Math.random();return e===1?Oe():e}function pt(e,t){return e===t?new ne:e<t?new te:new R}function mt(e){return ht(e)}function Ne(e,t){let n=mt(t)-t>0;return e<0&&n||e===0&&t<0?new Fe(void 0):new Ie(_t(e,t))}function gt(e){return Ne(e,.5)}function wt(e){return-1*e}function xt(e){return e>=0?pe(e):0-pe(wt(e))}function yt(e){return xt(e)}const J=640,Ae=480;function I(e,t){const n=e.data,r=t*4;return n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]}function v(e,t,n){const r=t*4,i=e.data;return i[r]=n>>24&255,i[r+1]=n>>16&255,i[r+2]=n>>8&255,i[r+3]=n&255,e}function bt(e){const n=document.getElementById("canvas").getContext("2d"),r=n.getImageData(0,0,J,Ae),i=e(r);n.putImageData(i,0,0)}function Lt(e,t,n,r){let i=0;for(let u=-1;u<=1;u++){for(let s=-1;s<=1;s++){const l=t+u,c=n+s;l<0||l>=J||c<0||c>=Ae||r(I(e,c*J+l))&&i++}return i}}const g=640;function $t(e,t,n){return I(e,n*g+t)}function re(e,t,n,r){return v(e,n*g+t,r)}const vt=480;function Et(){let t=x([4278190335,16711935,65535]),n=dt(t),r=st(n);return C(r,0)}function It(e,t){let n=Me(t,g),r=ee(t,g),i=$t(e,n,r);return i===0||Lt(e,n,r,l=>i===l)===0?e:re(e,n,r,0)}const Ft=479;function Mt(e,t){let n=Me(t,g),r=ee(t,g);if(r===Ft)return e;{let u=I(e,t),s=I(e,t+g),l=I(e,t+g-1),c=I(e,t+g+1);if(u===0)return e;if(s===0){let a=re(e,n,r+1,u);return v(a,t,0)}else if(l===0&&n>0){let a=v(e,t+g-1,u);return v(a,t,0)}else if(c===0&&n<639){let a=v(e,t+g+1,u);return v(a,t,0)}else return e}}function Ot(e,t,n){for(;;){let r=e,i=n;if(i===-1)return r;e=(()=>{let l=Mt(r,i);return It(l,i)})(),n=i-1}}const O=20;function Nt(e,t,n){let r=Et(),i=_e(-1*O,O);return W(i,e,(u,s)=>{let l=_e(-1*O,O);return W(l,u,(c,f)=>(()=>{let d=gt((()=>{let m=oe(f,2);return C(m,0)})()+(()=>{let m=oe(s,2);return C(m,0)})()),h=C(d,0);return yt(h)})()>O?c:re(c,t+f,n+s,r))})}function At(e,t,n,r){return bt(i=>{let s=t?Nt(i,n,r):i;return Ot(s,e,vt*g)})}const L=[];function Tt(e,t=w){let n;const r=new Set;function i(l){if(Q(e,l)&&(e=l,n)){const c=!L.length;for(const f of r)f[1](),L.push(f,e);if(c){for(let f=0;f<L.length;f+=2)L[f][0](L[f+1]);L.length=0}}}function u(l){i(l(e))}function s(l,c=w){const f=[l,c];return r.add(f),r.size===1&&(n=t(i,u)||w),l(e),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:i,update:u,subscribe:s}}const S=1,_={frameNumber:0,lastFrameTime:performance.now(),currentFrameTime:performance.now(),mouseDown:!1,mouseX:0,mouseY:0},Te=Tt(_);function De(){At(_.frameNumber,_.mouseDown,_.mouseX,_.mouseY),_.currentFrameTime=performance.now(),_.frameNumber++,Te.update(()=>({..._})),_.lastFrameTime=_.currentFrameTime,requestAnimationFrame(De)}function Dt(){const e=document.getElementById("canvas"),t=e.getContext("2d"),n=t.getImageData(0,0,e.width,e.height),r=[[255,0,0,0],[0,255,0],[0,0,255]];for(let i=0;i<n.data.length;i+=4){const[u,s,l]=r[Math.floor(Math.random()*r.length)];n.data[i]=u,n.data[i+1]=s,n.data[i+2]=l,n.data[i+3]=255}t.putImageData(n,0,0),e.addEventListener("mousedown",i=>{_.mouseDown=!0,_.mouseX=Math.trunc(i.offsetX/S),_.mouseY=Math.trunc(i.offsetY/S)}),e.addEventListener("mouseup",()=>{_.mouseDown=!1}),e.addEventListener("mousemove",i=>{_.mouseX=Math.trunc(i.offsetX/S),_.mouseY=Math.trunc(i.offsetY/S)}),requestAnimationFrame(De)}function St(e){let t,n,r;return{c(){t=V("div"),n=H("FPS: "),r=H(e[0])},m(i,u){N(i,t,u),fe(t,n),fe(t,r)},p(i,[u]){u&1&&je(r,i[0])},i:w,o:w,d(i){i&&E(t)}}}const Pt=200;function Ct(e,t,n){let r;Ye(e,Te,s=>n(2,r=s));let i=0,u=performance.now();return e.$$.update=()=>{if(e.$$.dirty&6){const s=performance.now();s-u>Pt&&(n(1,u=s),n(0,i=Math.trunc(1e3/(r.currentFrameTime-r.lastFrameTime))))}},[i,u,r]}class qt extends $e{constructor(t){super(),Le(this,t,Ct,St,Q,{})}}function Xt(e){let t,n,r,i,u,s;return u=new qt({}),{c(){t=V("h1"),t.textContent="Nit's Game of Sand",n=le(),r=V("canvas"),i=le(),Je(u.$$.fragment),M(t,"class","font-bold"),M(r,"class","scale h-[480px] w-[640px] bg-black bg-opacity-25"),ke(r,"image-rendering","pixelated"),M(r,"id","canvas"),M(r,"width","640"),M(r,"height","480")},m(l,c){N(l,t,c),N(l,n,c),N(l,r,c),N(l,i,c),ye(u,l,c),s=!0},p:w,i(l){s||(xe(u.$$.fragment,l),s=!0)},o(l){We(u.$$.fragment,l),s=!1},d(l){l&&(E(t),E(n),E(r),E(i)),be(u,l)}}}function Yt(e){return ze(()=>{Dt()}),[]}class Rt extends $e{constructor(t){super(),Le(this,t,Yt,Xt,Q,{})}}new Rt({target:document.getElementById("app")});
