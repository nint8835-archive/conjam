var T=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var F=(e,t,r)=>(T(e,t,"read from private field"),r?r.call(e):t.get(e)),z=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},b=(e,t,r,n)=>(T(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(i){if(i.ep)return;i.ep=!0;const u=r(i);fetch(i.href,u)}})();class M{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}}class B{static fromArray(t,r){let n=r||new X;for(let i=t.length-1;i>=0;--i)n=new W(t[i],n);return n}[Symbol.iterator](){return new se(this)}toArray(){return[...this]}atLeastLength(t){for(let r of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let r of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let r of this)t++;return t}}function _(e,t){return new W(e,t)}function g(e,t){return B.fromArray(e,t)}var y;class se{constructor(t){z(this,y,void 0);b(this,y,t)}next(){if(F(this,y)instanceof X)return{done:!0};{let{head:t,tail:r}=F(this,y);return b(this,y,r),{value:t,done:!1}}}}y=new WeakMap;class X extends B{}class W extends B{constructor(t,r){super(),this.head=t,this.tail=r}}class O extends M{static isResult(t){return t instanceof O}}class G extends O{constructor(t){super(),this[0]=t}isOk(){return!0}}class K extends O{constructor(t){super(),this[0]=t}isOk(){return!1}}function le(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!C(n)||!C(i)||!ge(n,i)||ce(n,i)||ae(n,i)||pe(n,i)||he(n,i)||oe(n,i)||_e(n,i))return!1;const s=Object.getPrototypeOf(n);if(s!==null&&typeof s.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[f,c]=fe(n);for(let l of f(n))r.push(c(n,l),c(i,l))}return!0}function fe(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function ce(e,t){return e instanceof Date&&(e>t||e<t)}function ae(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function pe(e,t){return Array.isArray(e)&&e.length!==t.length}function he(e,t){return e instanceof Map&&e.size!==t.size}function oe(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function _e(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function C(e){return typeof e=="object"&&e!==null}function ge(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function H(e,t){return t===0?0:e%t}function N(e,t){return Math.trunc(J(e,t))}function J(e,t){return t===0?0:e/t}class Q extends M{}class de extends M{}class U extends M{}function V(e){return e}function me(e,t){let n=V(e);return re(n,t)}function we(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1))e=r.tail,t=n+1;else return n}}function Z(e){return we(e,0)}function ye(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=_(i,n)}}}function $(e){return ye(e,g([]))}function Le(e){if(e.hasLength(0))return new K(void 0);{let t=e.head;return new G(t)}}function xe(e,t,r){for(;;){let n=e,i=t,u=r;if(n.hasLength(0))return $(u);{let s=n.head,f=n.tail,c=i(s)?_(s,u):u;e=f,t=i,r=c}}}function ve(e,t){return xe(e,t,g([]))}function Ee(e,t,r){for(;;){let n=e,i=t,u=r;if(n.hasLength(0))return $(u);{let s=n.head;e=n.tail,t=i,r=_(i(s),u)}}}function v(e,t){return Ee(e,t,g([]))}function qe(e,t){for(;;){let r=e,n=t;if(n<=0)return r;if(r.hasLength(0))return g([]);e=r.tail,t=n-1}}function ee(e,t,r){for(;;){let n=e,i=t,u=r;if(n.hasLength(0))return i;{let s=n.head;e=n.tail,t=u(i,s),r=u}}}function R(e,t,r,n,i,u){for(;;){let s=e,f=t,c=r,l=n,p=i,h=u;if(s===0&&f===0)return p;if(f===0&&c.atLeastLength(1)){let a=c.head,d=c.tail;e=s-1,t=f,r=d,n=l,i=_(a,p),u=h}else if(s===0&&l.atLeastLength(1)){let a=l.head,d=l.tail;e=s,t=f-1,r=c,n=d,i=_(a,p),u=h}else if(c.atLeastLength(1)&&l.atLeastLength(1)){let a=c.head,d=c.tail,L=l.head,I=l.tail;h(a,L)instanceof U?(e=s,t=f-1,r=c,n=I,i=_(L,p),u=h):(e=s-1,t=f,r=d,n=l,i=_(a,p),u=h)}else return p}}function Y(e,t,r,n,i,u){for(;;){let s=e,f=t,c=r,l=n,p=i,h=u;if(s===0&&f===0)return p;if(f===0&&c.atLeastLength(1)){let a=c.head,d=c.tail;e=s-1,t=f,r=d,n=l,i=_(a,p),u=h}else if(s===0&&l.atLeastLength(1)){let a=l.head,d=l.tail;e=s,t=f-1,r=c,n=d,i=_(a,p),u=h}else if(c.atLeastLength(1)&&l.atLeastLength(1)){let a=c.head,d=c.tail,L=l.head,I=l.tail;h(L,a)instanceof Q?(e=s-1,t=f,r=d,n=l,i=_(a,p),u=h):(e=s,t=f-1,r=c,n=I,i=_(L,p),u=h)}else return p}}function x(e,t,r,n){let i=N(t,2),u=e,s=qe(e,i);return t<3?n?Y(i,t-i,u,s,g([]),r):R(i,t-i,u,s,g([]),r):n?Y(i,t-i,x(u,i,r,!1),x(s,t-i,r,!1),g([]),r):R(i,t-i,x(u,i,r,!0),x(s,t-i,r,!0),g([]),r)}function Me(e,t){return x(e,Z(e),t,!0)}function Oe(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=_(i[1],n)}}}function Ie(e){return Me(e,(t,r)=>je(t[0],r[0]))}function Fe(e){let r=ee(e,g([]),(i,u)=>_([te(),u],i)),n=Ie(r);return Oe(n,g([]))}function P(e,t){return e.isOk()?e[0]:t}function be(e){return Math.ceil(e)}function Ae(e){return Math.trunc(e)}function Pe(e,t){return Math.pow(e,t)}function te(){const e=Math.random();return e===1?te():e}function je(e,t){return e===t?new de:e<t?new Q:new U}function ke(e){return be(e)}function Se(e){return Ae(e)}function re(e,t){let r=ke(t)-t>0;return e<0&&r||e===0&&t<0?new K(void 0):new G(Pe(e,t))}function Be(e){return re(e,.5)}function w(e,t){const r=e.data,n=t*4;return[r[n],r[n+1],r[n+2],r[n+3]]}function m(e,t,r){return e.data[t*4]=r[0],e.data[t*4+1]=r[1],e.data[t*4+2]=r[2],e.data[t*4+3]=r[3],e}function Ne(e){const t=document.getElementById("canvas"),r=t.getContext("2d"),n=r.getImageData(0,0,t.width,t.height),i=e(n);r.putImageData(i,0,0)}const o=160,Te=120;function E(e){let r=ee(e,0,(s,f)=>{let l=me(f,2),p=P(l,0);return(h=>h+s)(p)}),n=(s=>J(s,V(Z(e))))(r),i=Be(n),u=P(i,0);return Se(u)}function ze(){let t=g([[255,0,0,255],[0,255,0,255],[0,0,255,255]]),r=Fe(t),n=Le(r);return P(n,[0,0,0,0])}const Ce=159,ne=119;function Re(e,t){let r=H(t,o);if(N(t,o)===ne||r===0||r===Ce)return e;{let u=w(e,t);if(u[0]===0&&u[1]===0&&u[2]===0&&u[3]===0)return e;{let s=w(e,t+o-1),f=w(e,t+o),c=w(e,t+o+1),l=(()=>{let h=g([u,s,f,c]);return ve(h,a=>!le(a,[0,0,0,0]))})();return m(e,t,[E(v(l,a=>a[0])),E(v(l,a=>a[1])),E(v(l,a=>a[2])),E(v(l,a=>a[3]))])}}}function Ye(e,t){let r=H(t,o);if(N(t,o)===ne)return e;{let u=w(e,t),s=w(e,t+o),f=w(e,t+o-1),c=w(e,t+o+1);if(u[0]===0&&u[1]===0&&u[2]===0&&u[3]===0)return e;if(s[0]===0&&s[1]===0&&s[2]===0&&s[3]===0){let p=m(e,t+o,u);return m(p,t,[0,0,0,0])}else if(f[0]===0&&f[1]===0&&f[2]===0&&f[3]===0&&r>0){let p=m(e,t+o-1,u);return m(p,t,[0,0,0,0])}else if(c[0]===0&&c[1]===0&&c[2]===0&&c[3]===0&&r<159){let p=m(e,t+o+1,u);return m(p,t,[0,0,0,0])}else return e}}function De(e,t,r){for(;;){let n=e,i=r;if(i===-1)return n;e=(()=>{let f=Ye(n,i);return Re(f,i)})(),r=i-1}}function Xe(e,t,r,n){return Ne(i=>{let s=t?m(i,n*o+r,ze()):i;return De(s,e,Te*o)})}const q=4;let A=0,D=performance.now(),j=!1,k=0,S=0;const We=document.getElementById("fps");function ie(){Xe(A,j,k,S);const e=performance.now(),t=1e3/(e-D);A%60===0&&(We.textContent=`FPS: ${Math.trunc(t)}`),D=e,A++,requestAnimationFrame(ie)}function Ge(){const e=document.getElementById("canvas");e.addEventListener("mousedown",t=>{j=!0,k=Math.trunc(t.offsetX/q),S=Math.trunc(t.offsetY/q)}),e.addEventListener("mouseup",()=>{j=!1}),e.addEventListener("mousemove",t=>{k=Math.trunc(t.offsetX/q),S=Math.trunc(t.offsetY/q)}),requestAnimationFrame(ie)}Ge();
